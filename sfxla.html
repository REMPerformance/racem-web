<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <title>RACEM | Streetfighter LA</title>
  <meta name="description" content="Streetfighter LA – autorizovaný predaj cez RACEM. Výber modelu, filtre, výber materiálu a rýchla objednávka cez formulár." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://racem.sk/streetfighter-la.html" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&display=swap');

    :root{
      --red:#b31f24;
      --bg:#0b0b0b;
      --text:#ffffff;
      --line: rgba(255,255,255,0.08);

      --green:#16c784;
      --orange:#f59e0b;
      --danger:#ef4444;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }
    a{color:inherit}

    .bg{
      position:fixed; inset:0; z-index:-6; pointer-events:none;
      background:
        radial-gradient(circle at 15% 20%, rgba(179,31,36,0.22), transparent 45%),
        radial-gradient(circle at 88% 72%, rgba(179,31,36,0.12), transparent 46%),
        radial-gradient(circle at 55% 55%, rgba(255,255,255,0.03), transparent 60%);
      transform: translateZ(0);
    }
    .bg::after{
      content:""; position:absolute; inset:0; opacity:.55;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 44px),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 1px, transparent 1px 44px);
      animation: gridMove 24s linear infinite;
    }
    @keyframes gridMove{
      from{ background-position:0 0, 0 0; }
      to{ background-position:600px 0, 0 600px; }
    }
    .noise{
      position:fixed; inset:-20%; z-index:-5; pointer-events:none;
      opacity:.08;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.9'/%3E%3C/svg%3E");
      animation: noiseMove 10s steps(10) infinite;
    }
    @keyframes noiseMove{
      0%{transform:translate(0,0)}
      20%{transform:translate(-3%,2%)}
      40%{transform:translate(4%,-2%)}
      60%{transform:translate(-2%,-4%)}
      80%{transform:translate(3%,3%)}
      100%{transform:translate(0,0)}
    }

    .wrap{ width:100%; padding:0 6vw; }
    section{ padding:100px 0; position:relative; }

    .topbar{
      position:sticky; top:0; z-index:100;
      background: rgba(10,10,10,0.62);
      border-bottom: 1px solid rgba(255,255,255,0.06);
      backdrop-filter: blur(12px);
    }
    .nav{
      width:100%;
      padding: 14px 6vw;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 18px;
    }
    .brand-mini{
      display:flex; align-items:center; text-decoration:none;
      gap: 12px;
    }
    .brand-mini img{
      height:64px; width:auto; display:block; object-fit:contain;
      transition: transform .35s ease, filter .35s ease;
    }
    .brand-mini:hover img{
      transform: scale(1.06);
      filter: drop-shadow(0 10px 24px rgba(179,31,36,.28));
    }
    .brand-title{
      font-family: "Oswald", system-ui, sans-serif;
      text-transform: uppercase;
      letter-spacing:.16em;
      display:flex;
      flex-direction:column;
      line-height:1.0;
      color: rgba(255,255,255,0.82);
      margin-top:2px;
    }
    .brand-title b{
      color:#fff;
      font-size: 18px;
      letter-spacing:.18em;
    }
    .nav-links{
      display:flex;
      align-items:center;
      gap: 26px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .nav-links a{
      position:relative;
      text-decoration:none;
      color: rgba(255,255,255,0.76);
      font-family: "Oswald", system-ui, sans-serif;
      font-size: 16px;
      letter-spacing:.18em;
      text-transform: uppercase;
      padding: 6px 0;
      transition: color .2s ease, transform .2s ease;
    }
    .nav-links a:hover{ color:#fff; transform: translateY(-1px); }
    .nav-links a::after{
      content:"";
      position:absolute;
      left:50%;
      bottom:-10px;
      width:0;
      height:2px;
      background: var(--red);
      transform: translateX(-50%);
      transition: width .28s ease;
      box-shadow: 0 0 10px rgba(179,31,36,.75), 0 0 22px rgba(179,31,36,.35);
    }
    .nav-links a:hover::after{ width: 120%; }

    .btn{
      border:none;
      cursor:pointer;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(0,0,0,0.35);
      border:1px solid rgba(255,255,255,0.14);
      color:#fff;
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 16px;
      letter-spacing: .18em;
      text-transform: uppercase;
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .btn:hover{
      transform: translateY(-2px);
      border-color: rgba(179,31,36,0.42);
      background: rgba(179,31,36,0.18);
    }
    .btn.secondary{
      border-color: rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
    }
    .btn.secondary:hover{
      border-color: rgba(255,255,255,0.32);
      background: rgba(255,255,255,0.09);
    }

    /* ✅ VÝRAZNÝ OBJEDNAŤ */
    .btn.cta{
      background: linear-gradient(180deg, rgba(179,31,36,0.95), rgba(140,20,24,0.92));
      border-color: rgba(255,255,255,0.16);
      box-shadow: 0 18px 70px rgba(179,31,36,0.25), 0 18px 70px rgba(0,0,0,0.55);
      padding: 14px 16px;
      border-radius: 16px;
    }
    .btn.cta:hover{
      transform: translateY(-2px) scale(1.02);
      border-color: rgba(255,255,255,0.22);
      background: linear-gradient(180deg, rgba(199,45,50,0.98), rgba(140,20,24,0.94));
    }

    .hero{
      padding: 0;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      background:#050505;
    }
    .heroMedia{
      position:relative;
      min-height: min(70vh, 720px);
      overflow:hidden;
      display:grid;
      place-items:end;
    }
    .heroMedia::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(179,31,36,0.28), transparent 55%),
        radial-gradient(circle at 85% 70%, rgba(255,255,255,0.08), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.05), rgba(0,0,0,0.78));
      z-index:2;
      pointer-events:none;
    }
    .heroMedia::after{
      content:"";
      position:absolute; left:0; right:0; bottom:0;
      height: 160px;
      background: linear-gradient(to bottom, rgba(0,0,0,0), rgba(11,11,11,1));
      z-index:2;
      pointer-events:none;
    }
    .heroBg{
      position:absolute; inset:0;
      background: url("assets/editedsfxla.png") center/cover no-repeat;
      transform: scale(1.02);
      filter: contrast(1.05) saturate(1.05);
    }
    .heroInner{
      position:relative; z-index:3;
      width:100%;
      padding: 0 6vw 44px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:22px;
      flex-wrap:wrap;
    }

    .pill{
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 12px;
      border:1px solid var(--line);
      background: rgba(20,20,20,0.55);
      border-radius:999px;
      color: rgba(255,255,255,0.78);
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 16px;
      letter-spacing:.16em;
      text-transform:uppercase;
      width: fit-content;
    }
    .dot{ width:7px;height:7px;border-radius:50%; background: var(--red); box-shadow: 0 0 18px rgba(179,31,36,.7); }

    /* ✅ PÔVOD pill (nahrádza "VÝROBCA") */
    .originPill{
      border-color: rgba(255,255,255,0.16);
      background:
        radial-gradient(circle at 25% 50%, rgba(179,31,36,0.16), transparent 60%),
        rgba(20,20,20,0.55);
      color: rgba(255,255,255,0.88);
      letter-spacing:.18em;
    }
    .originPill b{ color:#fff; }

    /* Real USA flag (small, clean) */
    .usaFlag{
      width:22px;
      height:14px;
      position:relative;
      border:1px solid rgba(255,255,255,.28);
      border-radius:3px;
      overflow:hidden;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      background:
        repeating-linear-gradient(
          to bottom,
          #b22234 0 2px,
          #ffffff 2px 4px
        );
      flex: 0 0 auto;
    }
    .usaFlag::before{
      content:"";
      position:absolute;
      top:0; left:0;
      width:40%;
      height:54%;
      background:#3c3b6e;
    }

    .panel{
      background: rgba(20,20,20,0.75);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius:18px;
      padding:26px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
      position:relative;
      overflow:hidden;
    }
    /* Panel OFF – nech ostane iba CTA button */
.panel.panelClear{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  overflow: visible !important;
}

.panel.panelClear::after{
  display:none !important;
}

    .panel::after{
      content:"";
      position:absolute; left:-60px; top:-60px;
      width:160px; height:160px;
      background: radial-gradient(circle, rgba(179,31,36,0.18), transparent 60%);
      opacity:.95;
    }
    .panel > *{ position:relative; z-index:1; }

    h2{
      margin: 12px 0 12px 0;
      font-family:"Oswald", system-ui, sans-serif;
      text-transform: uppercase;
      letter-spacing: .18em;
      font-size: clamp(34px, 4.8vw, 56px);
      line-height:0.92;
    }
    p{
      margin:0 0 14px 0;
      color: rgba(255,255,255,0.78);
      line-height:1.75;
      font-size:15.5px;
      max-width: 980px;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 16px;
      align-items:start;
    }

    .gallery{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 12px;
      margin-top: 14px;
    }
    .gItem{
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.02);
      border-radius: 16px;
      overflow:hidden;
      position:relative;
      aspect-ratio: 4/3;
      cursor:pointer;
      transition: transform .18s ease, border-color .18s ease, filter .18s ease;
    }
    .gItem:hover{
      transform: translateY(-4px);
      border-color: rgba(179,31,36,0.35);
      filter: brightness(1.04);
    }
    .gItem img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
    }
    .gCap{
      position:absolute; left:10px; bottom:10px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.12);
      color: rgba(255,255,255,0.88);
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 14px;
      letter-spacing:.18em;
      text-transform: uppercase;
    }

    .carCards{
      display:grid;
      grid-template-columns: repeat(6, minmax(0,1fr));
      gap: 14px;
      margin-top: 12px;
    }
    .carCard{
      border:1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(20,20,20,0.92), rgba(10,10,10,0.72));
      border-radius: 18px;
      overflow:hidden;
      cursor:pointer;
      box-shadow: 0 14px 44px rgba(0,0,0,0.42);
      transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease, filter .18s ease;
      position:relative;
    }
    .carCard:hover{
      transform: translateY(-6px);
      border-color: rgba(179,31,36,0.45);
      box-shadow: 0 18px 62px rgba(0,0,0,0.62);
      filter: brightness(1.03);
    }
    .carCard.active{
      border-color: rgba(179,31,36,0.65);
      box-shadow: 0 18px 70px rgba(0,0,0,0.70);
    }
    .carMedia{
  position:relative;
  height: 220px;
  overflow:hidden;
  background: transparent;           /* ✅ preč s čiernym */
}

.carMedia::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.45)); /* jemný overlay OK */
  pointer-events:none;
}

.carMedia img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: cover;                 /* ✅ vždy presne */
  object-position:center;
  display:block;
  transform:none;
  filter:none;
}

    .carNameOverlay{
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%,-50%);
      z-index:3;
      pointer-events:none;
      width: 92%;
      text-align:center;
    }
    .carNameOverlay b{
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 30px;
      letter-spacing:.22em;
      text-transform: uppercase;
      color:#fff;
      text-shadow: 0 18px 40px rgba(0,0,0,0.90);
      display:inline-block;
    }

    /* ===========================
   UIverse-style CTA (RACEM)
   =========================== */

.bigGalleryCta{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;

  padding: 18px 18px;
  border-radius: 20px;
  text-decoration:none;
  cursor:pointer;

  /* “glass + depth” */
  border: 1px solid rgba(255,255,255,0.14);
  background:
    radial-gradient(circle at 20% 15%, rgba(179,31,36,0.22), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.35));
  box-shadow:
    0 18px 70px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.10);

  position:relative;
  overflow:hidden;
  isolation:isolate;

  transition:
    transform .18s ease,
    border-color .18s ease,
    filter .18s ease,
    box-shadow .18s ease;
}

/* “shine sweep” */
.bigGalleryCta::before{
  content:"";
  position:absolute;
  top:-40%;
  left:-35%;
  width: 55%;
  height: 180%;
  transform: rotate(18deg);
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.10),
    rgba(255,255,255,0.18),
    rgba(255,255,255,0.08),
    transparent
  );
  opacity: 0;
  transition: opacity .25s ease, transform .55s ease;
  z-index:0;
  pointer-events:none;
}

/* red glow layer */
.bigGalleryCta::after{
  content:"";
  position:absolute;
  inset:-2px;
  background: radial-gradient(circle at 25% 50%, rgba(179,31,36,0.28), transparent 60%);
  opacity:.0;
  transition: opacity .25s ease;
  z-index:0;
  pointer-events:none;
}

.bigGalleryCta:hover{
  transform: translateY(-3px);
  border-color: rgba(179,31,36,0.55);
  filter: brightness(1.03);
  box-shadow:
    0 22px 84px rgba(0,0,0,0.70),
    0 0 28px rgba(179,31,36,0.22),
    inset 0 1px 0 rgba(255,255,255,0.12);
}

.bigGalleryCta:hover::before{
  opacity: 1;
  transform: translateX(120%) rotate(18deg);
}

.bigGalleryCta:hover::after{
  opacity: 1;
}

.bigGalleryCta:active{
  transform: translateY(-1px) scale(0.995);
}

/* text */
.bigGalleryCta .label{
  position:relative;
  z-index:1;

  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.22em;
  text-transform: uppercase;
  font-size: clamp(18px, 2.2vw, 24px);
  line-height:1.05;
  color:#fff;

  /* subtle “engraved” */
  text-shadow: 0 18px 40px rgba(0,0,0,0.80);
}

/* arrow capsule */
.bigGalleryCta .arrow{
  position:relative;
  z-index:1;

  width: 56px;
  height: 56px;
  border-radius: 18px;

  display:grid;
  place-items:center;

  border:1px solid rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.40);
  box-shadow:
    0 18px 50px rgba(0,0,0,0.45),
    inset 0 1px 0 rgba(255,255,255,0.10);

  font-family:"Oswald", system-ui, sans-serif;
  font-size: 22px;
  color:#fff;

  transition: transform .18s ease, border-color .18s ease, background .18s ease;
}

.bigGalleryCta:hover .arrow{
  transform: translateX(4px);
  border-color: rgba(179,31,36,0.55);
  background: rgba(179,31,36,0.18);
}

/* mobile tweaks */
@media (max-width: 560px){
  .bigGalleryCta{ padding: 16px 14px; border-radius: 18px; }
  .bigGalleryCta .arrow{ width: 50px; height: 50px; border-radius: 16px; }
}

    .divider{
      height:1px;
      width:100%;
      background: rgba(255,255,255,0.08);
      margin: 18px 0;
    }

    .filterBar{
      margin-top: 16px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .filtersLeft{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .in, .sel{
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color:#fff;
      border-radius: 14px;
      padding: 12px 12px;
      outline:none;
      min-width: 180px;
      font-weight: 800;
      letter-spacing:.04em;
      box-shadow: 0 14px 40px rgba(0,0,0,0.35);
      font-family: Arial, sans-serif;
    }
    /* ===== Dark selects (dropdown menu fix) ===== */
:root { color-scheme: dark; } /* pomôže natívnym UI prvkom prejsť do dark */

.sel{
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;

  background: rgba(0,0,0,0.45);
  border:1px solid rgba(255,255,255,0.16);
  color: rgba(255,255,255,0.92);

  padding-right: 44px;            /* miesto pre šípku */
  cursor:pointer;

  transition: transform .15s ease, border-color .15s ease, background .15s ease;
}

.sel:hover{
  transform: translateY(-1px);
  border-color: rgba(179,31,36,0.35);
  background: rgba(179,31,36,0.12);
}

.sel:focus{
  outline:none;
  border-color: rgba(179,31,36,0.55);
  box-shadow: 0 0 0 4px rgba(179,31,36,0.18), 0 18px 60px rgba(0,0,0,0.55);
}

/* šípka (bez obrázka) */
.sel{
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(255,255,255,0.75) 50%),
    linear-gradient(135deg, rgba(255,255,255,0.75) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) 50%,
    calc(100% - 12px) 50%;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

/* samotné položky v rozbalenom menu (funguje v Chrome/Edge lepšie než vo všetkých browseroch) */
.sel option{
  background:#0b0b0b;
  color:#fff;
}

/* zvolená / hover položka - nie všade sa dá, ale keď sa dá, vyzerá to super */
.sel option:checked{
  background: rgba(179,31,36,0.55);
}
    .in:focus{
  border-color: rgba(179,31,36,0.55);
  box-shadow: 0 0 0 4px rgba(179,31,36,0.18), 0 18px 60px rgba(0,0,0,0.55);
}


    .in::placeholder{ color: rgba(255,255,255,0.50); }
    .miniStat{
      color: rgba(255,255,255,0.70);
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 16px;
      letter-spacing:.20em;
      text-transform: uppercase;
    }

    .productGrid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 14px;
      margin-top: 16px;
    }
    .pCard{
  position: relative;
  cursor: pointer;
  border-radius: 18px;
  overflow: hidden;

  border:1px solid rgba(255,255,255,0.10);
  background:
    radial-gradient(circle at 20% 15%, rgba(179,31,36,0.10), transparent 55%),
    linear-gradient(180deg, rgba(16,16,16,0.92), rgba(8,8,8,0.78));

  box-shadow: 0 16px 54px rgba(0,0,0,0.55);
  transition: transform .25s ease, box-shadow .25s ease;
}
.pCard::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: inherit;
  padding:1px;

  background:
    conic-gradient(
      from 0deg,
      transparent 0deg,
      transparent 60deg,
      var(--red) 120deg,
      transparent 180deg,
      transparent 360deg
    );

  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  opacity:0;
  pointer-events:none;
  animation: none;
}
.pCard::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  box-shadow:
    inset 0 0 0 1px rgba(179,31,36,0.0),
    0 0 0 rgba(179,31,36,0.0);
  transition: opacity .35s ease .35s; /* delay = až po chvíli */
  pointer-events:none;
  transition: opacity .35s ease;
}

.pCard:hover::before{
  opacity:1;
  animation: borderSpin 1.1s linear 1;
}

.pCard:hover::after{
  opacity:1;
  box-shadow:
    inset 0 0 0 1px rgba(179,31,36,0.55),
    0 0 28px rgba(179,31,36,0.35);
}

.pCard:hover{
  border-color: rgba(179,31,36,0.55);
  box-shadow: 0 22px 70px rgba(0,0,0,0.70);
   transform: translateY(-3px);
}

    .pCard:hover .pName{ text-shadow: 0 14px 40px rgba(0,0,0,0.70); }
.pCard:hover .pDesc{ color: rgba(255,255,255,0.80); }

    
    .pCard:active{
  transform: translateY(-1px) scale(0.99);
}

.tag{
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(10px);
}

    .pMedia{
  position:relative;
  height: 240px;              /* ✅ viac miesta na fotku */
  overflow:hidden;
  background: transparent;
}


.pMedia img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: cover;                 /* ✅ vždy full */
  object-position:center;
  display:block;
  transform:none;
  filter:none;                       /* ✅ preč s “tmavením” */
}


    .pTopRow{
      position:absolute; left:10px; right:10px; top:10px;
      display:flex; justify-content:space-between; gap:10px;
      z-index:2;
      align-items:flex-start;
    }

    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 14px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color:#fff;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.45);
      white-space:nowrap;
    }
    .tag .tDot{ width:8px; height:8px; border-radius:999px; background: var(--red); box-shadow:0 0 12px rgba(179,31,36,.7); }

    .pBody{
      padding: 14px 14px 16px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      flex:1;
    }
    .pName{
      margin:0;
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 20px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color:#fff;
      line-height: 0.95;
    }
    .pDesc{
      margin:0;
      font-size: 13.5px;
      line-height:1.6;
      color: rgba(255,255,255,0.72);
      flex:1;
    }
    .pBottom{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      margin-top: 4px;
    }
    .price{
      font-family:"Oswald", system-ui, sans-serif;
      letter-spacing:.18em;
      text-transform: uppercase;
      font-size: 16px;
      color: rgba(255,255,255,0.90);
    }
    .openHint{
      display:inline-flex;
      align-items:center;
      gap:10px;
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 14px;
      letter-spacing:.18em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.70);
    }
    .openHint .arr{
      width: 34px; height: 34px; border-radius: 14px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      transition: transform .18s ease, border-color .18s ease;
    }
    .pCard:hover .openHint .arr{
      transform: translateX(3px);
      border-color: rgba(179,31,36,0.35);
    }

    /* MODALS */
    .modal{
      position:fixed; inset:0; z-index:999;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,0.62);
      backdrop-filter: blur(10px);
    }
    .modal.show{ display:flex; }
    .modalCard{
      width: min(980px, 100%);
      border-radius: 18px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(12,12,12,0.92);
      box-shadow: 0 22px 80px rgba(0,0,0,0.70);
      overflow:hidden;
      position:relative;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 14px;
      border-bottom:1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.35);
    }
    .modalHead b{
      font-family:"Oswald", system-ui, sans-serif;
      letter-spacing:.18em;
      text-transform: uppercase;
      font-size: 16px;
    }
    .xBtn{
      border:none;
      cursor:pointer;
      width: 42px; height: 42px;
      border-radius: 14px;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.12);
      color:#fff;
      font-size: 18px;
      font-weight: 900;
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
    }
    .xBtn:hover{
      transform: translateY(-2px);
      border-color: rgba(179,31,36,0.35);
      background: rgba(179,31,36,0.16);
    }
    .modalBody{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    /* IMAGE + RIBBON */
  .mImg{
  border-radius: 18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.10);

  background:
    radial-gradient(circle at 30% 20%, rgba(179,31,36,0.20), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));

  min-height: 520px;              /* ⬅️ VÄČŠÍ HERO */
  position:relative;
  isolation:isolate;

  display:flex;
  align-items:center;
  justify-content:center;
}
.zoomHint{
  position:absolute;
  top:14px;
  left:50%;
  transform: translateX(-50%);
  padding: 8px 12px;
  border-radius: 999px;
  font-family:"Oswald", system-ui, sans-serif;
  font-size: 12px;
  letter-spacing:.22em;
  text-transform: uppercase;
  color:#fff;
  background: rgba(0,0,0,0.55);
  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter: blur(10px);
  pointer-events:none;
  opacity:.88;
  z-index:7;
}



.mImg img{
  width:100%;
  height:100%;
  object-fit: contain;       /* celý viditeľný */
  object-position:center;
  display:block;
    cursor: zoom-in;

  padding: 8px;              /* ⬅️ MENŠÍ RÁM */
  max-height: 100%;
}



    /* ✅ ZÁLOŽKA vpravo hore */
    .ribbon{
      position:absolute;
      top:14px;
      right:14px;
      z-index:5;
      padding: 10px 12px;
      border-radius: 14px;
      font-family:"Oswald", system-ui, sans-serif;
      letter-spacing:.20em;
      text-transform: uppercase;
      font-size: 13px;
      color:#fff;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.50);
      box-shadow: 0 18px 50px rgba(0,0,0,0.55);
      backdrop-filter: blur(10px);
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .ribbon::after{
      content:"";
      position:absolute;
      right:10px;
      bottom:-10px;
      width: 0; height: 0;
      border-left: 10px solid transparent;
      border-right: 0 solid transparent;
      border-top: 10px solid rgba(0,0,0,0.50);
      filter: drop-shadow(0 12px 16px rgba(0,0,0,0.45));
    }
    .rDot{
      width:10px;height:10px;border-radius:999px;background:#fff;
      box-shadow: 0 0 18px rgba(255,255,255,0.25);
      flex:0 0 auto;
    }
    .ribbon.in_stock{
      border-color: rgba(22,199,132,0.45);
      background: rgba(22,199,132,0.22);
    }
    .ribbon.in_stock .rDot{ background: var(--green); box-shadow:0 0 18px rgba(22,199,132,0.7); }
    .ribbon.made_to_order{
      border-color: rgba(245,158,11,0.55);
      background: rgba(245,158,11,0.20);
    }
    .ribbon.made_to_order .rDot{ background: var(--orange); box-shadow:0 0 18px rgba(245,158,11,0.65); }
    .ribbon.out_of_stock{
      border-color: rgba(239,68,68,0.55);
      background: rgba(239,68,68,0.18);
    }
    .ribbon.out_of_stock .rDot{ background: var(--danger); box-shadow:0 0 18px rgba(239,68,68,0.65); }

    .mInfo{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .mInfoTop{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  margin-bottom: 6px;
}

    
    .mTitle{
      margin:0;
      font-family:"Oswald", system-ui, sans-serif;
      letter-spacing:.18em;
      text-transform: uppercase;
      font-size: 20px;
      color:#fff;
      line-height:1.1;
    }

    /* ✅ POPIS "POD SEBOU" */
    .mDesc{
  white-space: pre-line;
  color: rgba(255,255,255,0.82);
  font-size: 15px;
  line-height: 1.9;
  letter-spacing: .02em;
  border-top: 1px solid rgba(255,255,255,0.10);
  padding-top: 14px;
}


    /* ✅ VARIANT CHIPS */
    .mLabel{
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 13px;
      letter-spacing:.20em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.68);
      margin-bottom: 8px;
    }
    .variantList{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .vChip{
  cursor:pointer;
  user-select:none;
  border-radius: 16px;
  padding: 10px 12px;
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.92);
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.12em;
  text-transform: uppercase;
  font-size: 12px;
  line-height: 1.15;
  display:flex;
  align-items:center;
  gap:10px;
  transition: transform .15s ease, border-color .15s ease, background .15s ease;
}

.vChip:hover{
  transform: translateY(-2px);
  border-color: rgba(179,31,36,0.45);
  background: rgba(179,31,36,0.12);
}

.vChip.active{
  border-color: rgba(179,31,36,0.65);
  background: rgba(179,31,36,0.22);
  box-shadow: 0 18px 50px rgba(179,31,36,0.10);
}

.vChip .vMain{
  font-weight: 800;
}

.vChip .vMeta{
  margin-left:auto;
  display:flex;
  gap:8px;
  opacity:.9;
}

.vChip .badge{
  padding: 6px 8px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  font-size: 11px;
  letter-spacing:.12em;
}


    /* ✅ CENA BLOK */
    .priceBlock{
  margin-top: 6px;
  padding: 16px;
  border-radius: 16px;
  background:
    radial-gradient(circle at 20% 20%, rgba(179,31,36,0.18), transparent 60%),
    linear-gradient(180deg, rgba(20,20,20,0.85), rgba(10,10,10,0.85));
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 18px 60px rgba(0,0,0,0.55);
  display:flex;
  flex-direction:column;
  gap:8px;
}

    .priceBig{
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.22em;
  text-transform: uppercase;
  font-size: 38px;
  line-height: 1;
  color:#fff;
}

.priceBig small{
  display:block;
  font-size: 12px;
  letter-spacing:.32em;
  color: rgba(255,255,255,0.55);
  margin-bottom: 6px;
}

    .priceSub{
      color: rgba(255,255,255,0.74);
      font-size: 13.5px;
      line-height: 1.55;
    }

    .priceSub{
  font-size: 13.5px;
  letter-spacing:.12em;
  color: rgba(255,255,255,0.78);
  display:flex;
  align-items:center;
  gap:8px;
}

.priceSub::before{
  content:"•";
  color: var(--red);
  font-size: 18px;
  line-height: 0;
}
.vChip.active{
  transform: scale(1.03);
}


    .mActions{
      margin-top:auto;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      padding-top: 10px;
    }

    .formGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 6px;
    }
    .formGrid .full{ grid-column: 1 / -1; }
    label{
      display:block;
      font-family:"Oswald", system-ui, sans-serif;
      font-size: 14px;
      letter-spacing:.18em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.68);
      margin-bottom: 6px;
    }
    input, textarea{
      width:100%;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color:#fff;
      border-radius: 14px;
      padding: 12px 12px;
      outline:none;
      font-weight: 800;
      letter-spacing:.02em;
      box-shadow: 0 14px 40px rgba(0,0,0,0.35);
      font-family: Arial, sans-serif;
    }
    textarea{ min-height: 120px; resize: vertical; }

    .noImg{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      background: linear-gradient(180deg, rgba(20,20,20,0.95), rgba(10,10,10,0.85));
      color: rgba(255,255,255,0.72);
      font-family:"Oswald", system-ui, sans-serif;
      letter-spacing:.22em;
      text-transform: uppercase;
      font-size: 14px;
      pointer-events:none;
    }

    @media (max-width: 1200px){
      .productGrid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
      .carCards{ grid-template-columns: repeat(4, minmax(0,1fr)); }
    }
    @media (max-width: 980px){
      .wrap{ padding:0 18px; }
      section{ padding: 76px 0; }
      .nav{ padding: 14px 18px; }
      .heroInner{ padding: 0 18px 30px; }
      .grid2{ grid-template-columns: 1fr; }
      .gallery{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .productGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .carCards{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .modalBody{ grid-template-columns: 1fr; }
      .mImg{ min-height: 240px; }
      .carMedia{ height: 200px; }
    }
    @media (max-width: 560px){
      section{ padding: 56px 0; }
      .gallery{ grid-template-columns: 1fr; }
      .productGrid{ grid-template-columns: 1fr; }
      .carCards{ grid-template-columns: 1fr; }
      .formGrid{ grid-template-columns: 1fr; }
      .in,.sel{ min-width: 160px; }
      .carMedia{ height: 210px; }
      .carNameOverlay b{ font-size: 28px; }
      .priceBig{ font-size: 30px; }
      .bigGalleryCta{ padding: 16px 14px; }
      .bigGalleryCta .title{ font-size: 20px; }
      .bigGalleryCta .arrow{ width: 48px; height: 48px; border-radius: 16px; }
    }
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
    }
    .imgNav{
  position:absolute;
  top:50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.55);
  color:#fff;
  font-size: 26px;
  font-weight: 900;
  cursor:pointer;
  z-index:6;
  display:grid;
  place-items:center;
  backdrop-filter: blur(10px);
  transition: transform .15s ease, border-color .15s ease, background .15s ease, opacity .15s ease;
  opacity:.88;
}
.imgNav:hover{
  transform: translateY(-50%) scale(1.04);
  border-color: rgba(179,31,36,0.45);
  background: rgba(179,31,36,0.22);
}
.imgNav.prev{ left: 14px; }
.imgNav.next{ right: 14px; }

.thumbRow{
  position:absolute;
  left: 14px;
  right: 14px;
  bottom: 14px;
  display:flex;
  gap:10px;
  overflow:auto;
  padding: 8px;
  border-radius: 16px;
  background: rgba(0,0,0,0.45);
  border:1px solid rgba(255,255,255,0.10);
  z-index:6;
  backdrop-filter: blur(10px);
}
.thumbRow::-webkit-scrollbar{ height: 8px; }
.thumbRow::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.12); border-radius: 999px; }

.thumb{
  width: 78px;
  height: 56px;
  border-radius: 12px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  cursor:pointer;
  flex: 0 0 auto;
  transition: transform .15s ease, border-color .15s ease, filter .15s ease;
}
.thumb:hover{
  transform: translateY(-2px);
  border-color: rgba(179,31,36,0.35);
  filter: brightness(1.05);
}
.thumb.active{
  border-color: rgba(179,31,36,0.65);
  box-shadow: 0 14px 40px rgba(179,31,36,0.12);
}
.thumb img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}
@keyframes borderSpin{
  from{ transform: rotate(0deg); }
  to{ transform: rotate(360deg); }
}
@supports not (-webkit-mask-composite: xor){
  .pCard::before{ display:none; }
  .pCard:hover{ border-color: rgba(179,31,36,0.65); }
}
/* FIX: vždy prst + klik na kartu */
.pCard, .pCard * { cursor: pointer; }
.pMedia img { pointer-events:none; }

/* FIX: nech hrana najprv obehne, potom fill */
.pCard::after{ transition: opacity .35s ease .35s; }

/* FALLBACK: keď mask-composite nie je podporované */
@supports not (-webkit-mask-composite: xor){
  .pCard::before{ display:none; }
  .pCard:hover{ border-color: rgba(179,31,36,0.65); }
}
.mInfoTop .ribbon{
  position: static;
}
.ribbon::after{ display:none; }
/* ===========================
   MODAL: fix výška + scroll len vpravo
   =========================== */

.modalCard{
  /* už máš width + border + bg... necháme, len pridáme */
  max-height: 92vh;                /* ✅ nikdy nepresiahne obrazovku */
  display:flex;
  flex-direction:column;
}

.modalHead{
  flex: 0 0 auto;                  /* ✅ header je “pevný” */
}

.modalBody{
  flex: 1 1 auto;                  /* ✅ zvyšok výšky patrí obsahu */
  overflow: hidden;                /* ✅ zabráni roztiahnutiu */
  align-items: stretch;
}

/* ľavá strana (obrázok) – nech je pekne v rámci */
.mImg{
  min-height: 100%;
  height: 100%;
}

/* pravá strana (text) – toto bude scrollovať */
.mInfo{
  height: 100%;
  max-height: 100%;
  overflow: auto;                  /* ✅ scroll iba tu */
  padding-right: 10px;             /* aby scrollbar “nežral” dizajn */
}

/* jemný scrollbar (voliteľné, ale vyzerá to profi) */
.mInfo::-webkit-scrollbar{ width: 10px; }
.mInfo::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,0.10);
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,0.35);
}
.mInfo::-webkit-scrollbar-thumb:hover{
  background: rgba(179,31,36,0.35);
}
@media (max-width: 980px){
  .modalCard{ max-height: 94vh; }

  .modalBody{
    overflow: auto;     /* ✅ scroll celé telo */
  }

  .mInfo{
    overflow: visible;  /* ✅ vypni scroll vpravo, lebo je to pod obrázkom */
    height: auto;
    padding-right: 0;
  }

  .mImg{
    height: auto;
    min-height: 240px;  /* nech to má aspoň nejaký hero */
  }
}
/* ===========================
   MEGA GALLERY MODAL (8 áut)
   =========================== */
.megaBody{
  padding: 14px;
  display:grid;
  grid-template-columns: 340px 1fr;
  gap: 14px;
  min-height: 70vh;
}

.megaLeft{
  border-radius: 18px;
  border:1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
  padding: 14px;
  display:flex;
  flex-direction:column;
  gap:12px;
  overflow:auto;
}

.megaTitle{
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.20em;
  text-transform: uppercase;
  font-size: 14px;
  color: rgba(255,255,255,0.72);
}

.catGrid{
  display:grid;
  grid-template-columns: 1fr;
  gap:10px;
}

.catBtn{
  border:1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  border-radius: 16px;
  padding: 12px 12px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  transition: transform .15s ease, border-color .15s ease, background .15s ease;
  text-align:left;
}

.catBtn:hover{
  transform: translateY(-2px);
  border-color: rgba(179,31,36,0.45);
  background: rgba(179,31,36,0.12);
}

.catBtn.active{
  border-color: rgba(179,31,36,0.65);
  background: rgba(179,31,36,0.22);
  box-shadow: 0 18px 50px rgba(179,31,36,0.10);
}

.catBtn .name{
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.18em;
  text-transform: uppercase;
  font-size: 14px;
  color:#fff;
  line-height:1.1;
}

.catBtn .count{
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.22em;
  text-transform: uppercase;
  font-size: 12px;
  color: rgba(255,255,255,0.70);
  white-space:nowrap;
}

.megaRight{
  border-radius: 18px;
  border:1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
  padding: 14px;
  overflow:auto;
}

.megaHeaderRow{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:12px;
  margin-bottom: 12px;
}

.megaH2{
  margin:0;
  font-family:"Oswald", system-ui, sans-serif;
  letter-spacing:.18em;
  text-transform: uppercase;
  font-size: 22px;
  color:#fff;
  line-height:1.05;
}

.megaHint{
  color: rgba(255,255,255,0.68);
  font-size: 13px;
  letter-spacing:.08em;
}

.megaGrid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 12px;
}

.megaItem{
  border:1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.02);
  border-radius: 16px;
  overflow:hidden;
  position:relative;
  aspect-ratio: 4/3;
  cursor:pointer;
  transition: transform .18s ease, border-color .18s ease, filter .18s ease;
}
.megaItem:hover{
  transform: translateY(-4px);
  border-color: rgba(179,31,36,0.35);
  filter: brightness(1.04);
}
.megaItem img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}

@media (max-width: 980px){
  .megaBody{ grid-template-columns: 1fr; }
  .megaGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 560px){
  .megaGrid{ grid-template-columns: 1fr; }
}

    /* aby fullscreen fotka bola vždy NAD mega galériou */
#megaGalleryModal{ z-index: 1100; }
#galleryModal{ z-index: 1200; }
/* ===============================
   PRODUCT CARD = CTA BUTTON STYLE
   (identické ako "Otvoriť galériu")
   =============================== */

/* reset všetkého fancy */
.pCard{
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.08);
  transition: border-color .25s ease;
}

/* ZRUŠ všetky staré efekty */
.pCard::before,
.pCard::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* animovaný outline – rovnaký trik ako CTA */
.pCard::before{
  border-radius: inherit;
  background:
    linear-gradient(
      120deg,
      transparent 30%,
      rgba(179,31,36,.9),
      transparent 70%
    );
  opacity:0;
  transition: opacity .25s ease;
}

/* hover = len rozsvietený okraj */
.pCard:hover{
  border-color: rgba(179,31,36,.55);
}

.pCard:hover::before{
  opacity:1;
  animation: ctaSweep 1.2s linear infinite;
}

/* žiadny pohyb, žiadny zoom */
.pCard *{
  transform:none !important;
  transition:none !important;
}

/* rovnaká animácia ako CTA */
@keyframes ctaSweep{
  from{ background-position:0% 0%; }
  to{ background-position:200% 0%; }
}

  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="noise"></div>

  <div class="topbar" id="top">
    <div class="nav">
      <a href="index.html" class="brand-mini" aria-label="RACEM">
        <img src="assets/rmgroup.png" alt="RACEM logo">
        <div class="brand-title">
        </div>
      </a>

      <nav class="nav-links" aria-label="Menu">
        <a href="index.html">Domov</a>
        <a href="#auta">Ponuka</a>
        <a href="#kontakt">Kontakt</a>
      </nav>
    </div>
  </div>

  <section class="hero" aria-label="Streetfighter LA hero">
    <div class="heroMedia">
      <div class="heroBg"></div>
      <div class="heroInner">
        <div class="heroActions"></div>
      </div>
    </div>
  </section>

  <!-- ✅ biely pás úplne preč -->

  <section id="oZnacke">
    <div class="wrap">
      <div class="grid2">
        <div class="panel">
          <!-- ✅ namiesto pillu "VÝROBCA" -->
          <div class="pill originPill">
            <span class="usaFlag" aria-hidden="true"></span>
            <span>PÔVOD:</span>
            <b>USA</b>
          </div>

          <h2>Streetfighter LA</h2>
          <p>
            SSFXLA (Street Fighter LA) je americká značka extrémnych widebody a aero kitov z Los Angeles, známa surovým street-style dizajnom,
            agresívnymi líniami a výraznou vizuálnou identitou. Ich bodykity sú určené pre show builds a upravené vozidlá, ktoré majú zaujať na prvý pohľad a vymaniť sa z OEM stereotypu.
          </p>
        </div>

        <div class="panel panelClear">
          <button class="bigGalleryCta" id="openMegaGallery" type="button">
  <div class="label">OTVORIŤ GALÉRIU</div>
  <div class="arrow">→</div>
</button>


          <div class="gallery" id="gallery">
            <div class="gItem" data-full="assets/sfxla-gallery/1.jpg" title="Open">
              <img src="assets/sfxla-gallery/1.jpg" alt="SFXLA gallery 1" onerror="this.closest('.gItem').style.display='none'">
              <div class="gCap">SFXLA</div>
            </div>
            <div class="gItem" data-full="assets/sfxla-gallery/2.jpg" title="Open">
              <img src="assets/sfxla-gallery/2.jpg" alt="SFXLA gallery 2" onerror="this.closest('.gItem').style.display='none'">
              <div class="gCap">Wide</div>
            </div>
            <div class="gItem" data-full="assets/sfxla-gallery/3.jpg" title="Open">
              <img src="assets/sfxla-gallery/3.jpg" alt="SFXLA gallery 3" onerror="this.closest('.gItem').style.display='none'">
              <div class="gCap">Aero</div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section id="auta">
    <div class="wrap">
      <div class="panel">
        <div class="pill"><span class="dot"></span>Ponuka</div>
        <h2>Naša ponuka:</h2>

        <div class="carCards" id="carCards"></div>

        <div class="divider"></div>

        <div id="produkty" style="display:flex; flex-wrap:wrap; align-items:flex-end; justify-content:space-between; gap:12px;">
          <div class="miniStat" id="productsTitle">Diely pre: všetky autá</div>
          <div class="miniStat" id="stat">0 dielov</div>
        </div>

        <div class="filterBar">
          <div class="filtersLeft">
            <input class="in" id="q" type="text" placeholder="Hľadať (napr. lip, spoiler, widebody)..." />
            <select class="sel" id="cat">
              <option value="">Kategória: všetko</option>
            </select>
          
            <button class="btn secondary" id="showAll" type="button">Všetky autá</button>
          </div>
        </div>

        <div class="productGrid" id="productGrid"></div>
      </div>
    </div>
  </section>

  <section id="brands">
  <div class="wrap">
    <div class="panel">
      <div class="pill"><span class="dot"></span>Ďalšie značky</div>
      <h2>Prezerať iné značky</h2>

      <div class="carCards">

        <a class="carCard" href="csr-automotive.html">
          <div class="carMedia">
            <img src="assets/CSR-Logo-Shop_transparent.svg" alt="CSR Automotive">
            <div class="carNameOverlay"><b>CSR Automotive</b></div>
          </div>
        </a>

        <a class="carCard" href="veilside.html">
          <div class="carMedia">
            <img src="assets/brands/veilside.webp" alt="Veilside">
            <div class="carNameOverlay"><b>Veilside</b></div>
          </div>
        </a>

        <!-- ďalšie dve značky neskôr -->
        <div class="carCard" style="opacity:.35; pointer-events:none;">
          <div class="carMedia">
            <div class="carNameOverlay"><b>Coming Soon</b></div>
          </div>
        </div>

        <div class="carCard" style="opacity:.35; pointer-events:none;">
          <div class="carMedia">
            <div class="carNameOverlay"><b>Coming Soon</b></div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


  <!-- PRODUCT DETAIL MODAL -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Product details">
      <div class="modalHead">
        <b id="modalTitle">Streetfighter LA</b>
        <button class="xBtn" id="closeProductModal" type="button" aria-label="Close">×</button>
      </div>

      <div class="modalBody">
        <div class="mImg">

  <button class="imgNav prev" id="mPrev" type="button" aria-label="Predošlý">‹</button>
  <button class="imgNav next" id="mNext" type="button" aria-label="Ďalší">›</button>


          <div class="zoomHint" id="zoomHint">KLIKNI PRE ZVÄČŠENIE</div>
<img id="mImg" src="" alt="Product image">

  <div class="noImg" id="mNoImg" style="display:none;">NO IMAGE</div>

  <div class="thumbRow" id="mThumbs" aria-label="Ďalšie fotky"></div>
</div>


        <div class="mInfo">

          <div class="mInfoTop">
  <div class="ribbon made_to_order" id="mRibbon"><span class="rDot"></span>NA OBJEDNÁVKU</div>
</div>


          <div class="mDesc" id="mDesc"></div>

          <div id="mVariantWrap" style="display:none;">
<div class="mLabel">Variant</div>
  <div class="variantList" id="mVariantList"></div>
</div>


          <div class="priceBlock">
            <div class="priceBig" id="mPriceBig">—</div>
            <div class="priceSub" id="mShip">—</div>
            <div class="priceSub" id="mDelivery">—</div>
          </div>

          <div class="mActions">
            <button class="btn cta" id="mOrder" type="button">OBJEDNAŤ</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GALLERY MODAL -->
  <div class="modal" id="galleryModal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Gallery image">
      <div class="modalHead">
        <b>Galéria</b>
        <button class="xBtn" id="closeGalleryModal" type="button" aria-label="Close">×</button>
      </div>
      <div style="padding:14px;">
        <div class="mImg" style="min-height:420px;">
          <img id="gFull" src="" alt="Gallery image">
          <div class="noImg" id="gNoImg" style="display:none;">NO IMAGE</div>
        </div>
      </div>
    </div>
  </div>
<!-- MEGA GALLERY MODAL (8 kategórií áut) -->
<div class="modal" id="megaGalleryModal" aria-hidden="true">
  <div class="modalCard" role="dialog" aria-modal="true" aria-label="SFXLA Mega Gallery">
    <div class="modalHead">
      <b>Streetfighter LA — Galéria áut</b>
      <button class="xBtn" id="closeMegaGalleryModal" type="button" aria-label="Close">×</button>
    </div>

    <div class="megaBody">
      <div class="megaLeft">
        <div class="megaTitle">Kategórie (8 áut)</div>
        <div class="catGrid" id="megaCatGrid"></div>
      </div>

      <div class="megaRight">
        <div class="megaHeaderRow">
          <h3 class="megaH2" id="megaCarTitle">—</h3>
          <div class="megaHint" id="megaCarHint">Klikni na fotku pre fullscreen</div>
        </div>
        <div class="megaGrid" id="megaGrid"></div>
      </div>
    </div>
  </div>
</div>

  <!-- ORDER FORM MODAL -->
  <div class="modal" id="orderModal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="Order form">
      <div class="modalHead">
        <b>Objednávka / dopyt</b>
        <button class="xBtn" id="closeOrderModal" type="button" aria-label="Close">×</button>
      </div>

      <div style="padding:14px;">
        <p style="margin:0 0 10px; color:rgba(255,255,255,0.78); line-height:1.6;">
          Vyplň údaje. <b>Poznámka</b> je už predvyplnená podľa dielu/variantu.
        </p>

       <form id="orderForm" action="https://formspree.io/f/xnjjqkpd" method="POST">
  <!-- skrytý “order blob” aby prišlo aj keď niekto vymaže textarea -->
  <input type="hidden" id="orderBlob" name="order_blob" value="">

  <div class="formGrid">
    <div>
      <label for="name">Meno a priezvisko</label>
      <input id="name" name="name" type="text" required placeholder="Napr. Lukáš Tonkovič">
    </div>

    <div>
      <label for="phone">Telefón</label>
      <input id="phone" name="phone" type="tel" required placeholder="+421 ...">
    </div>

    <div>
      <label for="email">E-mail</label>
      <input id="email" name="email" type="email" required placeholder="racem@...">
    </div>

    <div>
      <label for="address">Adresa doručenia</label>
      <input id="address" name="address" type="text" required placeholder="Ulica, číslo, mesto, PSČ, krajina">
    </div>

    <div class="full">
      <label for="car">Vozidlo (overenie kompatibility)</label>
      <input id="car" name="car" type="text" placeholder="BMW E46 330i, 2004, facelift/preface, karoséria...">
    </div>

    <div class="full">
      <label for="customer_note">Poznámka zákazníka</label>
      <textarea id="customer_note" name="customer_note" placeholder="Napíš čokoľvek dôležité: rok, verziu, M-paket, požiadavky, montáž..."></textarea>
    </div>

    <div class="full">
      <label for="message">Nezáväzná objednávka</label>
      <textarea id="message" name="message" required readonly></textarea>
    </div>
  </div>

  <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
    <button class="btn secondary" id="cancelSend" type="button">Zavrieť</button>
    <button class="btn" type="submit">Odoslať</button>
  </div>
</form>

      </div>
    </div>
  </div>


  <footer style="border-top:1px solid rgba(255,255,255,0.08); padding:40px 0;">
  <div class="wrap" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:space-between; align-items:center;">
    
    <div style="color:rgba(255,255,255,0.55); font-size:14px;">
      © 2026 RACEM / REM Performance
    </div>

    <div style="display:flex; gap:18px; flex-wrap:wrap;">
      <a href="vop.html">VOP</a>
      <a href="ochrana-osobnych-udajov.html">Ochrana osobných údajov</a>
      <a href="kontakt.html">Kontakt</a>
    </div>

  </div>
</footer>


  <script>
    const PLACEHOLDER_DATA_URI =
      "data:image/svg+xml;charset=UTF-8," +
      encodeURIComponent(`
        <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'>
          <defs>
            <linearGradient id='g' x1='0' x2='0' y1='0' y2='1'>
              <stop offset='0' stop-color='#111'/>
              <stop offset='1' stop-color='#050505'/>
            </linearGradient>
          </defs>
          <rect width='1200' height='800' fill='url(#g)'/>
          <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'
            fill='rgba(255,255,255,0.55)' font-family='Arial' font-size='44' letter-spacing='6'>
            NO IMAGE
          </text>
        </svg>
      `);

    const DATA = {
      cars: [
        { id:"e36", label:"BMW E36",          image:"assets/E36-main.webp" },
        { id:"e46", label:"BMW E46",          image:"assets/e46-main.webp" },
        { id:"e90", label:"BMW E90",          image:"assets/e90-main.webp" },
        { id:"e92", label:"BMW E92",          image:"assets/e92-main.webp" },
        { id:"f30", label:"BMW F30",          image:"assets/F30-main.webp" },
        { id:"f80", label:"BMW F80",          image:"assets/f80-main.webp" },
        { id:"g8x", label:"BMW G80/82/83",    image:"assets/g80-main.webp" },
        { id:"evox",label:"Mitsubishi Evo X", image:"assets/evox-main.jpg" },
        { id:"cam5",label:"Camaro Gen5",      image:"assets/gen5-main.webp" },
        { id:"cam6",label:"Camaro Gen6",      image:"assets/gen6-main.webp" },
        { id:"gt4", label:"Porsche GT4",      image:"assets/gt4-main.webp" }
      ],
      products: []
    };


    let activeCarId = "";
    let activeProduct = null;
    let activeVariantIndex = 0;
    let activeImgIndex = 0;


    const $ = (s, el=document) => el.querySelector(s);
    const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));

    function escapeHtml(str){
      return String(str ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function fmtEUR(n){
      if (typeof n !== "number" || Number.isNaN(n)) return "—";
      return n.toLocaleString("sk-SK", { minimumFractionDigits: 0, maximumFractionDigits: 0 }) + " €";
    }

    function getStockStatus(p){
      const s = (p.stockStatus || "").trim();
      if (s) return s;
      const a = (p.availability || "").trim();
      if (a === "in_stock") return "in_stock";
      if (a === "out_of_stock") return "out_of_stock";
      return "made_to_order";
    }
    function stockLabel(status){
      if (status === "in_stock") return "SKLADOM";
      if (status === "out_of_stock") return "VYPREDANÉ";
      return "NA OBJEDNÁVKU";
    }

    function minPriceEUR(prod){
  // 1) ak má produkt priamo priceEUR
  if (typeof prod.priceEUR === "number") return fmtEUR(prod.priceEUR);

  // 2) inak z variantov
  const prices = (prod.variants || []).map(v => v.priceEUR).filter(x => typeof x === "number");
  if (!prices.length) return "cena na dopyt";

  const min = Math.min(...prices);
  const max = Math.max(...prices);

  // keď má viac variantov, ukáž "od"
  return (min === max) ? fmtEUR(min) : `od ${fmtEUR(min)}`;
}

    function variantSummary(p){
  const vars = Array.isArray(p.variants) ? p.variants : [];
  if (!vars.length) return "Bez variantu";

  const names = vars.map(v => v.name || "Variant").filter(Boolean);
  const unique = Array.from(new Set(names));

  if (unique.length === 1) return `Variant: ${unique[0]}`;
  return `Variantov: ${unique.length}`;
}


function shipSummary(p){
  const ship = (typeof p.shippingEUR === "number") ? p.shippingEUR : 0;
  return ship ? `Doprava: ${fmtEUR(ship)}` : "Doprava: podľa dohody";
}

function deliverySummary(p){
  return `Dodanie: ${p.delivery || "Upresníme po objednávke"}`;
}


    function setSafeImage(imgEl, url, noImgEl){
      if (!imgEl) return;
      if (noImgEl) noImgEl.style.display = "none";
      imgEl.onerror = () => {
        imgEl.onerror = null;
        imgEl.src = PLACEHOLDER_DATA_URI;
        if (noImgEl) noImgEl.style.display = "grid";
      };
      imgEl.src = url || PLACEHOLDER_DATA_URI;
    }

    async function loadProducts(){
      try{
        const res = await fetch("sfxla-products.json", { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP " + res.status);

        const json = await res.json();
        const list = Array.isArray(json.products) ? json.products : [];

        DATA.products = list.map(p => {
          const images = Array.isArray(p.images) ? p.images : [];
          const image = p.image || images[0] || "";
          return {
            ...p,
            image,
            images,
            variants: Array.isArray(p.variants) ? p.variants : [],
            short: p.short || p.subtitle || "",
            description: p.description || "",
            delivery: p.delivery || "Upresníme po objednávke",
            shippingEUR: (typeof p.shippingEUR === "number") ? p.shippingEUR : 0
          };
        });

      }catch(err){
        console.error("Failed to load sfxla-products.json:", err);
        DATA.products = [];
      }
    }

    function buildCars(){
      const host = $("#carCards");
      if (!host) return;
      host.innerHTML = "";

      const allCard = document.createElement("div");
      allCard.className = "carCard" + (activeCarId === "" ? " active" : "");
      allCard.tabIndex = 0;
      allCard.setAttribute("role","button");
      allCard.dataset.car = "";
      allCard.innerHTML = `
        <div class="carMedia">
          <img src="assets/E36-main.webp" alt="Všetky autá">
          <div class="carNameOverlay"><b>VŠETKY</b></div>
        </div>
      `;
      allCard.addEventListener("click", () => selectCar(""));
      allCard.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " "){ e.preventDefault(); selectCar(""); }
      });
      host.appendChild(allCard);

      DATA.cars.forEach(c => {
        const card = document.createElement("div");
        card.className = "carCard" + (c.id === activeCarId ? " active" : "");
        card.tabIndex = 0;
        card.setAttribute("role","button");
        card.dataset.car = c.id;

        card.innerHTML = `
          <div class="carMedia">
            <img src="${escapeHtml(c.image || "")}" alt="${escapeHtml(c.label)}" onerror="this.src='${PLACEHOLDER_DATA_URI}'">
            <div class="carNameOverlay"><b>${escapeHtml(c.label)}</b></div>
          </div>
        `;

        card.addEventListener("click", () => selectCar(c.id));
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " "){
            e.preventDefault();
            selectCar(c.id);
          }
        });

        host.appendChild(card);
      });

      updateCarActive();
    }

    function selectCar(id){
      activeCarId = id || "";
      updateCarActive();
      renderAll();
      document.querySelector("#produkty")?.scrollIntoView({behavior:"smooth", block:"start"});
    }

    function updateCarActive(){
      $$(".carCard").forEach(c => {
        const id = c.dataset.car || "";
        c.classList.toggle("active", id === activeCarId);
      });
    }

    function buildFilterOptions(){
  const cat = $("#cat");
  if (!cat) return;

  const cats = new Set();
  DATA.products.forEach(p => {
    if (p.category) cats.add(p.category);
  });

  cat.innerHTML =
    `<option value="">Kategória: všetko</option>` +
    Array.from(cats).sort().map(x =>
      `<option value="${escapeHtml(x)}">${escapeHtml(x)}</option>`
    ).join("");
}


    function getFilteredProducts(){
      const q = ($("#q")?.value || "").trim().toLowerCase();
      const cat = $("#cat")?.value || "";

      return DATA.products.filter(p => {
        if (activeCarId && p.carId !== activeCarId) return false;
        if (cat && p.category !== cat) return false;

        if (q){
          const blob = `${p.title} ${p.short} ${p.category}`.toLowerCase();
          if (!blob.includes(q)) return false;
        }
        return true;
      });
    }

    function renderProducts(){
      const grid = $("#productGrid");
      const titleEl = $("#productsTitle");
      const statEl = $("#stat");
      if (!grid) return;

      const carLabel = activeCarId
        ? (DATA.cars.find(c=>c.id===activeCarId)?.label || activeCarId)
        : "všetky autá";

      if (titleEl) titleEl.textContent = `Diely pre: ${carLabel}`;

      const items = getFilteredProducts();
      if (statEl) statEl.textContent = `${items.length} dielov`;

      grid.innerHTML = "";

      if (!DATA.products.length){
        grid.innerHTML = `
          <div class="panel" style="grid-column:1/-1; padding:18px;">
            <div class="pill"><span class="dot"></span>produkty sa nenačítali</div>
            <h2 style="margin:12px 0 8px;">Skontroluj JSON</h2>
            <p style="margin:0;">
              Uisti sa, že súbor <b>sfxla-products.json</b> je v roote (vedľa tohto HTML) a je validný JSON.
              <br>Tip: ak testuješ cez <b>file://</b> (dvojklik), fetch často nefunguje — musí to bežať cez GitHub Pages.
            </p>
          </div>
        `;
        return;
      }

      if (!items.length){
        grid.innerHTML = `
          <div class="panel" style="grid-column:1/-1; padding:18px;">
            <div class="pill"><span class="dot"></span>nič sme nenašli</div>
            <h2 style="margin:12px 0 8px;">Skús zmeniť filtre</h2>
            <p style="margin:0;">Skús zmeniť kategóriu, variant alebo vyber “Všetky autá”.</p>
          </div>
        `;
        return;
      }

      items.forEach(p => {
        const car = DATA.cars.find(c=>c.id===p.carId)?.label || p.carId;

        const card = document.createElement("div");
        card.className = "pCard";
        card.tabIndex = 0;
        card.setAttribute("role","button");
        card.setAttribute("aria-label", "Open " + (p.title || "product"));

        const imgSrc = p.image || (Array.isArray(p.images) ? p.images[0] : "") || "";

        card.innerHTML = `
  <div class="pMedia">
    <img alt="${escapeHtml(p.title)}">
  </div>

  <div class="pBody">
    <div class="pName">${escapeHtml(p.title || "")}</div>
    <p class="pDesc">${escapeHtml(p.short || "")}</p>

    <div class="pMeta" style="display:flex; flex-direction:column; gap:6px; margin-top:2px;">
      <div class="miniStat" style="font-size:13px; letter-spacing:.18em;">
        ${escapeHtml(variantSummary(p))}
      </div>
      <div class="miniStat" style="font-size:13px; letter-spacing:.18em;">
        ${escapeHtml(shipSummary(p))}
      </div>
      <div class="miniStat" style="font-size:13px; letter-spacing:.18em;">
        ${escapeHtml(deliverySummary(p))}
      </div>
    </div>

    <div class="pBottom">
      <div class="price">${escapeHtml(minPriceEUR(p))}</div>
      <div class="openHint"><span>Detail</span> <span class="arr">→</span></div>
    </div>
  </div>
`;


        const imgEl = card.querySelector(".pMedia img");
        setSafeImage(imgEl, imgSrc, null);

        card.addEventListener("click", () => openProduct(p));
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " "){
            e.preventDefault();
            openProduct(p);
          }
        });

        grid.appendChild(card);
      });
    }

    function renderAll(){
      renderProducts();
      updateCarActive();
    }

    // Modal elements
    const productModal = $("#productModal");
    const closeProductModal = $("#closeProductModal");
    const modalTitle = $("#modalTitle");
    const mRibbon = $("#mRibbon");
    const mImg = $("#mImg");
    const mNoImg = $("#mNoImg");
    const mTitle = $("#mTitle");
    const mDesc = $("#mDesc");
    const mVariantList = $("#mVariantList");
    const mPriceBig = $("#mPriceBig");
    const mVariantWrap = $("#mVariantWrap");
    const mShip = $("#mShip");
    const mDelivery = $("#mDelivery");
    const mOrder = $("#mOrder");
    const mPrev = $("#mPrev");
    const mNext = $("#mNext");
    const mThumbs = $("#mThumbs");

    if (mPrev) mPrev.addEventListener("click", () => setModalImage(activeImgIndex - 1));
if (mNext) mNext.addEventListener("click", () => setModalImage(activeImgIndex + 1));

window.addEventListener("keydown", (e) => {
  if (!productModal?.classList.contains("show")) return;
  if (e.key === "ArrowLeft") setModalImage(activeImgIndex - 1);
  if (e.key === "ArrowRight") setModalImage(activeImgIndex + 1);
});

    // 🔍 CLICK TO EXPAND – product image fullscreen
if (mImg){
  mImg.addEventListener("click", () => {
    if (!activeProduct) return;

    const imgs = getProductImages(activeProduct);
    if (!imgs.length) return;

    const src = imgs[activeImgIndex] || imgs[0];
    setSafeImage(gFull, src, gNoImg);

    if (galleryModal){
      galleryModal.classList.add("show");
      galleryModal.setAttribute("aria-hidden","false");
    }
  });
}


function getProductImages(p){
  const arr = []
    .concat(p?.image ? [p.image] : [])
    .concat(Array.isArray(p?.images) ? p.images : []);
  // unikátne + bez prázdnych
  return Array.from(new Set(arr.filter(Boolean)));
}

function setModalImage(index){
  if (!activeProduct) return;
  const imgs = getProductImages(activeProduct);
  if (!imgs.length){
    setSafeImage(mImg, "", mNoImg);
    if (mThumbs) mThumbs.innerHTML = "";
    return;
  }

  activeImgIndex = ((index % imgs.length) + imgs.length) % imgs.length;
  setSafeImage(mImg, imgs[activeImgIndex], mNoImg);

  if (mThumbs){
    $$(".thumb", mThumbs).forEach((t, i) => t.classList.toggle("active", i === activeImgIndex));
  }
  // ak thumbs ešte neexistujú (napr. prvé otvorenie), vytvor ich
if (mThumbs && !mThumbs.children.length) buildThumbs();
}

function buildThumbs(){
  if (!mThumbs || !activeProduct) return;
  const imgs = getProductImages(activeProduct);

  // keď je 0/1 obrázok, thumbnails netreba
  if (imgs.length <= 1){
    mThumbs.innerHTML = "";
    return;
  }

  mThumbs.innerHTML = "";
  imgs.forEach((src, i) => {
    const d = document.createElement("div");
    d.className = "thumb" + (i === activeImgIndex ? " active" : "");
    d.innerHTML = `<img src="${escapeHtml(src)}" alt="thumb ${i+1}" onerror="this.src='${PLACEHOLDER_DATA_URI}'">`;
    d.addEventListener("click", () => setModalImage(i));
    mThumbs.appendChild(d);
  });
}

    function openProduct(p){
      activeProduct = p;
      activeVariantIndex = 0;

      const title = p.title || "—";
      if (modalTitle) modalTitle.textContent = `Streetfighter LA — ${title}`;
      if (mTitle) mTitle.textContent = title;

      const status = getStockStatus(p);
      if (mRibbon){
        mRibbon.className = `ribbon ${status}`;
        mRibbon.innerHTML = `<span class="rDot"></span>${escapeHtml(stockLabel(status))}`;
      }

      if (mDesc){
        mDesc.textContent = p.description || p.short || "";
      }

      activeImgIndex = 0;                  // ✅ reset image index
setModalImage(0);                    // ✅ nastav prvý obrázok
buildThumbs();                       // ✅ sprav thumbnails

buildVariantChips();
updateVariantPrice();

      if (productModal){
        productModal.classList.add("show");
        productModal.setAttribute("aria-hidden","false");
      }
    }

function buildVariantChips(){
  if (!mVariantList) return;

  const vars = Array.isArray(activeProduct?.variants) ? activeProduct.variants : [];

  // Ak produkt nemá variants, ale má priceEUR -> schovaj variant blok
  if (!vars.length){
    if (mVariantWrap) mVariantWrap.style.display = "none";
    mVariantList.innerHTML = "";
    activeVariantIndex = 0;
    return;
  }

  if (mVariantWrap) mVariantWrap.style.display = "block";
  mVariantList.innerHTML = "";

  vars.forEach((v, i) => {
    const chip = document.createElement("div");
    chip.className = "vChip" + (i === activeVariantIndex ? " active" : "");

    const name = (v.name || `Variant ${i+1}`).toUpperCase();
    const price = (typeof v.priceEUR === "number") ? fmtEUR(v.priceEUR) : "UPRESNÍME";

    chip.innerHTML = `
      <span class="vMain">${escapeHtml(name)}</span>
      <span class="vMeta">
        <span class="badge">${escapeHtml(price)}</span>
      </span>
    `;

    chip.addEventListener("click", () => {
      activeVariantIndex = i;
      setActiveChip(i);
      updateVariantPrice();
    });

    mVariantList.appendChild(chip);
  });
}


    function setActiveChip(index){
      $$(".vChip", mVariantList).forEach((c, i) => c.classList.toggle("active", i === index));
    }

   function updateVariantPrice(){
  if (!activeProduct) return;

  const vars = Array.isArray(activeProduct.variants) ? activeProduct.variants : [];
  const v = vars[activeVariantIndex];

  const ship = (typeof activeProduct.shippingEUR === "number") ? activeProduct.shippingEUR : 0;
  const delivery = activeProduct.delivery || "Upresníme po objednávke";

  // cena: buď z variantu, alebo z product.priceEUR
  const base =
    (v && typeof v.priceEUR === "number") ? v.priceEUR :
    (typeof activeProduct.priceEUR === "number") ? activeProduct.priceEUR :
    null;

  const variantName = vars.length ? (v?.name || "—") : "—";

  if (mPriceBig){
    mPriceBig.innerHTML = base !== null
      ? `<small>CENA</small><br>${fmtEUR(base)}`
      : `<small>CENA</small><br>UPRESNÍME`;
  }

  if (mShip) mShip.textContent = `Doprava: ${ship ? fmtEUR(ship) : "podľa dohody"}`;
  if (mDelivery) mDelivery.textContent = `Dodanie: ${delivery}`;

  const car = DATA.cars.find(c=>c.id===activeProduct.carId)?.label || activeProduct.carId;
  const status = getStockStatus(activeProduct);

  const manufacturer = "Streetfighter LA";
const note =
`OBJEDNÁVKA – ${manufacturer}
Diel: ${activeProduct.title || "—"}
Variant: ${variantName}
Cena: ${base !== null ? fmtEUR(base) : "UPRESNÍME"}
Doprava: ${ship ? fmtEUR(ship) : "PODĽA DOHODY"}
Dodanie: ${delivery}

Vozidlo (overenie kompatibility): ${car}

Poznámka zákazníka: (dopíš vyššie do poľa “Poznámka zákazníka”)`;


  const msg = $("#message");
const carInput = $("#car");
const blob = $("#orderBlob");
const customerNote = $("#customer_note");

if (msg) msg.value = note;
if (carInput) carInput.value = car;

// hidden poistka: vždy pošli aj komplet order text
if (blob) blob.value = note;

// keď zákazník píše poznámku, udrž “order blob” aktuálny
if (customerNote){
  customerNote.oninput = () => {
    const extra = `\n\n---\nPOZNÁMKA ZÁKAZNÍKA:\n${customerNote.value || ""}`;
    if (blob) blob.value = note + extra;
  };
}

}

    function closeModal(modal){
      if (!modal) return;
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden","true");
    }

    if (closeProductModal) closeProductModal.addEventListener("click", () => closeModal(productModal));
    if (productModal) productModal.addEventListener("click", (e) => { if (e.target === productModal) closeModal(productModal); });

    const galleryModal = $("#galleryModal");
    const closeGalleryModal = $("#closeGalleryModal");
    const gFull = $("#gFull");
    const gNoImg = $("#gNoImg");

    const galleryEl = $("#gallery");
    if (galleryEl){
      galleryEl.addEventListener("click", (e) => {
        const item = e.target.closest(".gItem");
        if (!item) return;
        const full = item.getAttribute("data-full") || "";
        if (!full) return;

        setSafeImage(gFull, full, gNoImg);

        if (galleryModal){
          galleryModal.classList.add("show");
          galleryModal.setAttribute("aria-hidden","false");
        }
      });
    }

    if (closeGalleryModal) closeGalleryModal.addEventListener("click", () => closeModal(galleryModal));
    if (galleryModal) galleryModal.addEventListener("click", (e) => { if (e.target === galleryModal) closeModal(galleryModal); });

    const orderModal = $("#orderModal");
    const closeOrderModal = $("#closeOrderModal");
    const cancelSend = $("#cancelSend");

   function openOrderModal(){
  closeModal(productModal);
  if (!orderModal) return;

  // reset customer note pri každom otvorení
  const cn = $("#customer_note");
  if (cn) cn.value = "";

  orderModal.classList.add("show");
  orderModal.setAttribute("aria-hidden","false");
  setTimeout(()=> $("#name")?.focus(), 50);
}


    if (mOrder) mOrder.addEventListener("click", openOrderModal);
    if (closeOrderModal) closeOrderModal.addEventListener("click", () => closeModal(orderModal));
    if (cancelSend) cancelSend.addEventListener("click", () => closeModal(orderModal));
    if (orderModal) orderModal.addEventListener("click", (e) => { if (e.target === orderModal) closeModal(orderModal); });

    const openGeneralForm = $("#openGeneralForm");
    if (openGeneralForm){
      openGeneralForm.addEventListener("click", () => {
        const msg = $("#message");
        const car = $("#car");
        if (msg){
          msg.value =
`DOPYT – Streetfighter LA

Auto:
Diel:
Variant:

Poznámka (dopíš rok/facelift/verziu):`;
        }
        if (car) car.value = "";
        openOrderModal();
      });
    }

    ["q","cat"].forEach(id => {
      const el = $("#" + id);
      if (!el) return;
      el.addEventListener("input", renderAll);
      el.addEventListener("change", renderAll);
    });

    const showAllBtn = $("#showAll");
    if (showAllBtn){
      showAllBtn.addEventListener("click", () => {
        activeCarId = "";
        updateCarActive();
        renderAll();
      });
    }

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape"){
        [orderModal, productModal, galleryModal].forEach(m => m?.classList.contains("show") && closeModal(m));
      }
    });

    (async () => {
      await loadProducts();
      buildFilterOptions();
      buildCars();
      renderAll();
      console.log("SFXLA products loaded:", DATA.products.length);
    })();

    /* ===========================
   MEGA GALLERY (8 áut) LOGIC
   =========================== */

// ⚠️ Tu si len uprav cesty k fotkám.
// Odporúčanie štruktúry:
// assets/sfxla-mega/e36/1.jpg
// assets/sfxla-mega/e36/2.jpg
// ...
const MEGA_GALLERY = [

  /* ======================
     BMW E36
     ====================== */
  {
    id: "e36",
    label: "BMW E36",
    images: [
      "assets/BMW-E36-Wide-Body-Kit_2048x2048.webp",

      "assets/BMW-E36-Rear-Spoiler_2048x2048.webp",
      "assets/e36-3.jpg",
      "assets/e36-4.jpg",
      "assets/e36-5.jpg",
      "assets/e36-7.jpg",
      "assets/e36-8.jpg",
      "assets/e36-9.jpg",
      "assets/e36-10.jpg",
      "assets/e36-11.jpg",
      "assets/e36-12.jpg",
      "assets/e36-13.jpg",
      "assets/e36-14.jpg",
      "assets/e36-15.jpg",
      "assets/e36-16.jpg",
      "assets/ducktaill.webp",

      "assets/e36-lipp.jpg",
      "assets/e36-6.jpg"
    ]
  },

  /* ======================
     BMW E46
     ====================== */
  {
    id: "e46",
    label: "BMW E46",
    images: [
      "assets/e46-main.webp",
      "assets/e46-side.webp",
      "assets/e46-rear.webp",
      "assets/e46-prof.webp",
      "assets/e46-11.webp",
      "assets/e46-flare.webp",

      "assets/190320100331lc2327DrN-xxl.jpg",
      "assets/190320100331lc2327e5q-hd.jpg",
      "assets/190320100331lc2327Hnv-xxl.jpg",
      "assets/190320100331lc2327mkH-xxl.jpg",
      "assets/190320100331lc23271CS-xxl.jpg",
      "assets/190320100332lc2327bbP-hd.jpg",
      "assets/190320100332lc2327i4C-hd.jpg",
      "assets/190320100332lc2327Mqb-md.jpg",
      "assets/190320100332lc2327Wki-md.jpg",
      "assets/190320100332lc2327YTV-xxl.jpg",
      "assets/190320100332lc2327Zfd-xxl.jpg",
      "assets/190320100332lc232739F-xxl.jpg",
      "assets/190320100333lc2327CVg-xxl.jpg",
      "assets/190320100333lc2327f8Q-xxl.jpg",
      "assets/190320100333lc2327fqC-xxl.jpg",
      "assets/190320100333lc2327G76-hd.jpg",
      "assets/190320100333lc2327L0p-hd.jpg",
      "assets/190320100333lc2327o9u-hd.jpg",
      "assets/190320100333lc2327ZWl-s.jpg",
      "assets/190320100333lc23272IF-xxl.jpg",
      "assets/190320100334lc2327b9q-hd.jpg",
      "assets/190320100334lc2327Baf-xxl.jpg",
      "assets/190320100334lc23272Rl-xxl.jpg",
      "assets/190320100334lc232774h-xxl.jpg"
    ]
  },

  /* ======================
     BMW E90
     ====================== */
  {
    id: "e90",
    label: "BMW E90",
    images: [
      "assets/e90-mainp.webp",
      "assets/e90-main.webp",
      "assets/e90-rear.webp",

    "assets/190320100313lc2327MKL-xl.jpg",
    "assets/190320100313lc23275qt-xl.jpg",
    "assets/190320100314lc2327DlG-l.jpg",
    "assets/190320100314lc2327Ejr-xl.jpg",
    "assets/190320100314lc2327EzF-l.jpg",
    "assets/190320100314lc2327gC3-xl.jpg",
    "assets/190320100314lc2327h1p-md.jpg",
    "assets/190320100314lc2327hIO-l.jpg",
    "assets/190320100314lc2327lge-hd.jpg",
    "assets/190320100314lc2327N97-xl.jpg",
    "assets/190320100314lc2327TuA-l.jpg",
    "assets/190320100314lc2327Wce-xl.jpg",
    "assets/190320100315lc2327Dun-md.jpg",
    "assets/190320100315lc2327HIQ-xl.jpg",
    "assets/190320100315lc2327iQP-l.jpg",
    "assets/190320100315lc2327O2i-md.jpg",
    "assets/190320100315lc2327xR6-xl.jpg"
    ]
  },

  /* ======================
     BMW E92
     ====================== */
  {
    id: "e92",
    label: "BMW E92",
    images: [
      "assets/e92-main.webp",
      "assets/e92-rear.webp",
      "assets/e92-side.jpg",
      "assets/e92-front.jpg",
      "assets/e92-sider.jpg",

      "assets/e92-lip.jpg",

      "assets/e92-spoiler.jpg",
      "assets/e92-spoiler1.jpg",

    "assets/190320100347lc2327ae8-hd.jpg",
    "assets/190320100347lc2327C34-hd.jpg",
    "assets/190320100347lc2327cLM-xl.jpg",
    "assets/190320100347lc2327lf5-xxl.jpg",
    "assets/190320100347lc2327qhr-md.jpg",
    "assets/190320100347lc2327V8i-xxl.jpg",
    "assets/190320100347lc2327XpK-l.jpg",
    "assets/190320100347lc23273o7-l.jpg",
    "assets/190320100348lc2327aML-xxl.jpg",
    "assets/190320100348lc2327cTU-xl.jpg",
    "assets/190320100348lc2327eyf-xxl.jpg",
    "assets/190320100348lc2327HGb-xl.jpg",
    "assets/190320100348lc2327OOe-hd.jpg"
    ]
  },

  /* ======================
     BMW F30
     ====================== */
  {
    id: "f30",
    label: "BMW F30",
    images: [
      "assets/f30-main.webp",
      "assets/f30-base.webp",
      "assets/f30-front.webp",
      "assets/f30-front1.webp",
      "assets/f30-side.webp",
      "assets/f30-rear.webp",
      "assets/f30-back.webp",
      "assets/f30-hood.webp",
      "assets/f30-wheel.webp",
      "assets/wheel2-f30.webp",

      "assets/f30-lip.webp",
      "assets/f30-lip1.webp",

      "assets/f30-ww.webp",
      "assets/f30-wing.webp",
      "assets/f30-duck.webp"
    ]
  },

  /* ======================
     BMW F80 / F8x
     ====================== */
  {
    id: "f80",
    label: "BMW F80 / F8x",
    images: [
      "assets/f80-main.webp",
      "assets/f80-lip.webp",

      "assets/f8-lip1.webp",
      "assets/f8-lipclose.webp",
      "assets/f8-wheel.webp",

      "assets/IMG_8738_2048x2048.webp"
    ]
  },

  /* ======================
     BMW G80 / G82 / G83
     ====================== */
  {
    id: "g8x",
    label: "BMW G80 / G82 / G83",
    images: [
      "assets/g80-main.webp",
      "assets/m4-rear.webp",

      "assets/g80-diff.webp",
      "assets/g80-diff2.webp",
      "assets/g80-diff3.webp",

      "assets/g80-skirt.webp",
      "assets/g80-skirter.webp",

      "assets/BMWG80-G82-G83FRONTLIPCARBON-1_png_2048x2048.webp",
      "assets/BMWG80-G82-G83FRONTLIPCARBON-1_2048x2048.webp",
      "assets/BMWG80-G82-G83FRONTLIPCARBON-2_2048x2048.webp",
      "assets/StreetFighterLAG82M4FrontLip_2048x2048.webp",
      "assets/TEST1_2048x2048.webp",
      "assets/IMG_8418_2048x2048.webp",

      "assets/BMWG80-G82-G83SPOILERCARBON-1_9deec9b4-dfb4-4840-b360-2b3b0f71e224_2048x2048.webp",
      "assets/BMWG80-G82-G83SPOILERCARBON-2_7b8b38fa-2211-4af7-b534-cf03403c4587_2048x2048.webp",
      "assets/BMWG80-G82-G83SPOILERCARBON-3_e8bcd583-6ec7-4249-b775-743e12b5dadc_2048x2048.webp",
      "assets/BMWG80-G82-G83SPOILERCARBON-4_8b49bf0c-3081-4611-a202-78238d27605c_2048x2048.webp",

      "assets/BMWG80-G82-G83SIDESKIRTSCARBON-1_ceae60be-ddf0-4683-a858-d61c945e12a9_2048x2048.webp"
    ]
  },

  /* ======================
     MITSUBISHI EVO X
     ====================== */
  {
    id: "evox",
    label: "Mitsubishi Lancer Evo X",
    images: [
      "assets/evox-main.jpg",
      "assets/EVOX-Wide.webp",
      "assets/EVOX-Wide-Body-Kit-racecar-side-shot_2048x2048.webp",
      "assets/EVOX-Wide-Body-Kit-front-flare_2048x2048.webp",

      "assets/CSF-EVO-X-Wide-Body-Kit-side_2048x2048.webp",
      "assets/CSF-EVO-X-Wide-Body-Kit-rear-side-render_2048x2048.webp",
      "assets/CSF-EVO-X-Wide-Body-Kit-rear-spoiler_2048x2048.webp",

      "assets/EVOX_REAR_DIFFUSER_-_RESIZED_3_2048x2048.webp",

      "assets/Evo_X_Danny_2_2048x2048.webp",

       "assets/190320080314lc2327Jy8-xxl.jpg",
    "assets/190320080315lc2327DZl-hd.jpg",
    "assets/190320080315lc2327gIn-hd.jpg",
    "assets/190320080315lc2327Lwv-hd.jpg",
    "assets/190320080315lc2327MXH-xxl.jpg",
    "assets/190320080315lc2327oZZ-hd.jpg",
    "assets/190320080315lc2327phW-hd.jpg",
    "assets/190320080315lc23274EM-xxl.jpg",
    "assets/190320080316lc2327L9c-hd.jpg",
    "assets/190320080316lc2327qcz-xxl.jpg",
    "assets/190320080316lc23272or-xxl.jpg",

    "assets/190320080331lc2327EYR-xl.jpg",
    "assets/190320080331lc2327GBl-l.jpg",
    "assets/190320080331lc2327h0V-l.jpg",
    "assets/190320080331lc2327hpM-xl.jpg",
    "assets/190320080331lc2327LQo-xl.jpg",
    "assets/190320080331lc2327XlB-l.jpg",

    "assets/190320080332lc2327eC1-xxl.jpg",
    "assets/190320080332lc2327HiX-l.jpg",
    "assets/190320080332lc2327JMx-xl.jpg",
    "assets/190320080332lc2327nxI-xxl.jpg",
    "assets/190320080332lc2327O2t-xl.jpg",
    "assets/190320080332lc2327oPO-l.jpg",
    "assets/190320080332lc2327rCu-l.jpg",
    "assets/190320080332lc2327tvP-l.jpg",
    "assets/190320080332lc2327W9E-xxl.jpg",
    "assets/190320080332lc2327x9S-l.jpg",

    "assets/190320080333lc2327L2h-xxl.jpg",
    "assets/190320080333lc2327REf-xxl.jpg",
    "assets/190320080333lc2327tzo-xxl.jpg",
    "assets/190320080333lc23270lP-xxl.jpg",

    "assets/190320080334lc2327EbE-xxl.jpg",
    "assets/190320080334lc2327eHS-xl.jpg",
    "assets/190320080334lc2327EK2-l.jpg",
    "assets/190320080334lc2327gSS-xxl.jpg",
    "assets/190320080334lc2327hCi-xxl.jpg",
    "assets/190320080334lc2327JLz-xl.jpg",
    "assets/190320080334lc2327kGh-l.jpg",
    "assets/190320080334lc2327Kh0-xl.jpg",
    "assets/190320080334lc2327Kok-xxl.jpg",
    "assets/190320080334lc2327N5j-xl.jpg",
    "assets/190320080334lc2327ORC-xxl.jpg",
    "assets/190320080334lc2327W2h-xxl.jpg",
    "assets/190320080334lc2327zqN-xxl.jpg",
    "assets/190320080334lc23272Ju-xl.jpg",
    "assets/190320080334lc23279Pv-l.jpg",

    "assets/190320080335lc2327CmW-xxl.jpg",
    "assets/190320080335lc2327Gjl-l.jpg",
    "assets/190320080335lc2327jhu-xxl.jpg",
    "assets/190320080335lc2327NFt-xl.jpg",
    "assets/190320080335lc2327soy-xxl.jpg",
    "assets/190320080335lc2327TTL-l.jpg",
    "assets/190320080335lc2327uFr-xxl.jpg",
    "assets/190320080335lc2327UhB-xxl.jpg",
    "assets/190320080335lc2327Vth-l.jpg",
    "assets/190320080335lc23271pq-l.jpg",
    "assets/190320080335lc23274Qz-l.jpg",

    "assets/190320090300lc2327B29-s.jpg",
    "assets/190320090300lc2327BuF-l.jpg",
    "assets/190320090300lc2327cyr-xxl.jpg",
    "assets/190320090300lc2327gol-xl.jpg",
    "assets/190320090300lc2327LSn-xxl.jpg",

    "assets/190320090301lc2327Fcd-xxl.jpg",
    "assets/190320090301lc2327G2E-l.jpg",
    "assets/190320090301lc2327gw3-xl.jpg",
    "assets/190320090301lc2327I5p-xxl.jpg",
    "assets/190320090301lc2327LlQ-xl.jpg",
    "assets/190320090301lc2327m4B-l.jpg",
    "assets/190320090301lc2327vRs-s.jpg",
    "assets/190320090301lc2327z26-xxl.jpg",
    "assets/190320090301lc2327ZBC-l.jpg",
    "assets/190320090301lc232707z-l.jpg",

      "assets/123456.jpg",
      "assets/377.jpg",
      "assets/11561.jpg",
      "assets/12683.jpg",
      "assets/45343.jpg",
      "assets/72876.jpg",
      "assets/78393.jpg",
      "assets/78683.jpg",
      "assets/123737.jpg",
      "assets/123783.jpg",
      "assets/139732.jpg",
      "assets/651561.jpg",
      "assets/783734.jpg",
      "assets/2054545.jpg",
      "assets/4354343.jpg",
      "assets/5476373.jpg",
      "assets/56118971.jpg",
      "assets/78345378.jpg",
      "assets/190320080334lc2327N5j-xl.jpg",
      "assets/190320080334lc2327EbE-xxl.jpg"
    ]
  },

  /* ======================
     CHEVROLET CAMARO GEN 5
     ====================== */
  {
    id: "camaro-gen5",
    label: "Chevrolet Camaro Gen 5",
    images: [
      "assets/gen5-main.webp",
      "assets/IMG_0809_2048x2048.webp",
      "assets/IMG_0476ps_2048x2048.jpg",
      "assets/IMG_0822_2048x2048.webp",
      "assets/IMG_9681_2048x2048.webp",
      "assets/IMG_9646_2048x2048.webp"
    ]
  },

  /* ======================
     CHEVROLET CAMARO GEN 6
     ====================== */
  {
    id: "camaro-gen6",
    label: "Chevrolet Camaro Gen 6",
    images: [
      "assets/gen6-main.webp",
      "assets/IMG_7976_2048x2048.webp",
      "assets/IMG_7975_2048x2048.webp",
      "assets/IMG_7981_2048x2048.webp",
      "assets/IMG_8175_2048x2048.webp",
      "assets/IMG_8171_2048x2048.jpg",
      "assets/IMG_9177A_2048x2048.webp",
      "assets/Image-30_2048x2048.webp",

      "assets/REARDECKLID_2048x2048.webp",

      "assets/Chevrolet-Camaro-full-kit-front_b392dada-7ddd-4b87-97eb-d4337648f970_2048x2048.webp",
      "assets/Chevrolet-Camaro-full-kit-side_d781324a-b488-4e80-9796-aae07230927c_2048x2048.webp",
      "assets/Chevrolet-Camaro-full-kit-back_e37413c5-7c3f-49af-9883-3a1a653e47c9_2048x2048.webp",
      "assets/Chevrolet-Camarp-full-kit-rear_9af2a493-90a3-47b4-8d3a-ec1f797868c9_2048x2048.webp",

      "assets/brandogen6small1_5d1c00ec-c35a-46ad-a6b9-022ed6766c27_2048x2048.webp",
      "assets/brandogen6small2_2048x2048.webp",
      "assets/brandogen6small3_2048x2048.webp",
      "assets/brandogen6small4_a1de3b44-1196-4854-9a5b-5c3c7536b971_2048x2048.webp",
      "assets/brandogen6small5_2048x2048.webp",

      "assets/190320050338lc2327B4S-xxl.jpg",
      "assets/190320050338lc2327iIO-xl.jpg"
    ]
  },

  /* ======================
     PORSCHE GT4
     ====================== */
  {
    id: "gt4",
    label: "Porsche GT4 / Cayman",
    images: [
      "assets/gt4-main.webp",
      "assets/GT4_Roll_Cage_1_2048x2048.webp",
      "assets/GT4_Roll_Cage_2_2048x2048.webp",
      "assets/GT4_Roll_Cage_4_2048x2048.webp",
      "assets/GT4_Roll_Cage_7_2048x2048.webp"
    ]
  }

];


let activeMegaId = MEGA_GALLERY[0]?.id || "";

const megaGalleryModal = $("#megaGalleryModal");
const openMegaGalleryBtn = $("#openMegaGallery");
const closeMegaGalleryModalBtn = $("#closeMegaGalleryModal");

const megaCatGrid = $("#megaCatGrid");
const megaGrid = $("#megaGrid");
const megaCarTitle = $("#megaCarTitle");

function openMegaGallery(){
  if (!megaGalleryModal) return;
  megaGalleryModal.classList.add("show");
  megaGalleryModal.setAttribute("aria-hidden","false");
  renderMegaCats();
  renderMegaGrid(activeMegaId || MEGA_GALLERY[0]?.id || "");
}

function closeMegaGallery(){
  closeModal(megaGalleryModal);
}

function renderMegaCats(){
  if (!megaCatGrid) return;
  megaCatGrid.innerHTML = "";

  MEGA_GALLERY.forEach(cat => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.className = "catBtn" + (cat.id === activeMegaId ? " active" : "");
    btn.innerHTML = `
      <span class="name">${escapeHtml(cat.label)}</span>
      <span class="count">${(cat.images || []).length} FOTO</span>
    `;
    btn.addEventListener("click", () => {
      activeMegaId = cat.id;
      $$(".catBtn", megaCatGrid).forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      renderMegaGrid(cat.id);
    });
    megaCatGrid.appendChild(btn);
  });
}

function renderMegaGrid(catId){
  if (!megaGrid) return;

  const cat = MEGA_GALLERY.find(x => x.id === catId) || MEGA_GALLERY[0];
  if (!cat) return;

  activeMegaId = cat.id;

  if (megaCarTitle) megaCarTitle.textContent = cat.label;

  const imgs = Array.isArray(cat.images) ? cat.images.filter(Boolean) : [];
  megaGrid.innerHTML = "";

  if (!imgs.length){
    megaGrid.innerHTML = `
      <div class="panel" style="grid-column:1/-1; padding:18px;">
        <div class="pill"><span class="dot"></span>žiadne fotky</div>
        <h2 style="margin:12px 0 8px;">Doplň cesty k obrázkom</h2>
        <p style="margin:0;">V časti <b>MEGA_GALLERY</b> doplň správne cesty (napr. assets/sfxla-mega/${escapeHtml(cat.id)}/1.jpg).</p>
      </div>
    `;
    return;
  }

  imgs.forEach((src, idx) => {
    const item = document.createElement("div");
    item.className = "megaItem";
    item.innerHTML = `<img alt="${escapeHtml(cat.label)} ${idx+1}">`;

    const imgEl = item.querySelector("img");
    setSafeImage(imgEl, src, null);

    // klik -> fullscreen (už existujúci galleryModal s gFull)
    item.addEventListener("click", () => {
      setSafeImage(gFull, src, gNoImg);
      if (galleryModal){
        galleryModal.classList.add("show");
        galleryModal.setAttribute("aria-hidden","false");
      }
    });

    megaGrid.appendChild(item);
  });
}

if (openMegaGalleryBtn) openMegaGalleryBtn.addEventListener("click", openMegaGallery);
if (closeMegaGalleryModalBtn) closeMegaGalleryModalBtn.addEventListener("click", closeMegaGallery);

if (megaGalleryModal){
  megaGalleryModal.addEventListener("click", (e) => {
    if (e.target === megaGalleryModal) closeMegaGallery();
  });
}

  </script>
</body>
</html>
