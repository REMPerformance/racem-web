<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>RACEM – Rezervácie mobilného autoservisu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --red:#b31f24;
      --bg:#0b0b0b;
      --panel:#141414;
      --panel2:#101010;
      --text:#ffffff;
      --muted:#cfcfcf;
      --muted2:#9b9b9b;
      --line: rgba(255,255,255,0.08);
      --shadow: 0 20px 60px rgba(0,0,0,0.6);
      --radius:18px;
      --green:#22c55e;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at top, #151515 0, #050505 60%, #000 100%);
      color: var(--text);
      overflow-x:hidden;
    }

    .wrap{
      max-width: 920px;
      margin: 64px auto;
      padding: 24px;
    }

    .top{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:18px;
      flex-wrap:wrap;
    }

    h1{
      font-size: 34px;
      margin: 0 0 8px;
      letter-spacing:0.2px;
    }

    p.sub{
      color: var(--muted);
      max-width: 740px;
      margin: 0;
      line-height:1.6;
    }

    .panel{
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      border-radius: var(--radius);
      padding: 28px;
      box-shadow: var(--shadow);
      margin-top: 32px;
      border:1px solid var(--line);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
    }
    @media(max-width:720px){
      .grid{grid-template-columns:1fr}
      .wrap{margin:36px auto}
    }

    label{
      font-size: 13px;
      color: var(--muted2);
      margin-bottom: 6px;
      display:block;
    }

    input, select, textarea{
      width:100%;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background:#0e0e0e;
      color: white;
      font-size: 15px;
      outline: none;
      transition: box-shadow .12s ease, border-color .12s ease, transform .12s ease;
    }

    input:focus, select:focus, textarea:focus{
      border-color: rgba(179,31,36,0.55);
      box-shadow: 0 0 0 4px rgba(179,31,36,0.10);
    }

    textarea{resize:vertical; min-height:130px}
    .full{grid-column: 1 / -1}

    .btn{
      margin-top: 22px;
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      border: none;
      background: linear-gradient(135deg, var(--red), #7a1418);
      color: white;
      font-size: 16px;
      font-weight: 800;
      letter-spacing:0.2px;
      cursor:pointer;
      box-shadow: 0 10px 30px rgba(179,31,36,0.35);
      transition: filter .12s ease, transform .12s ease, opacity .12s ease;
    }
    .btn:hover{filter:brightness(1.08)}
    .btn:active{transform: translateY(1px)}
    .btn[disabled]{opacity:.55;cursor:not-allowed;transform:none}

    .warning{
      margin-top: 18px;
      padding: 14px;
      border-radius: 12px;
      background: rgba(179,31,36,0.15);
      border: 1px solid rgba(179,31,36,0.4);
      font-size: 14px;
      line-height: 1.55;
    }

    .note{
      margin-top: 18px;
      font-size: 14px;
      color: var(--muted2);
      line-height: 1.6;
    }

    .status{
      margin-top: 16px;
      padding: 14px;
      border-radius: 12px;
      border:1px solid var(--line);
      background:#0e0e0e;
      color: var(--muted);
      display:none;
      line-height:1.55;
    }
    .status.ok{
      display:block;
      border-color: rgba(34,197,94,0.35);
      background: rgba(34,197,94,0.08);
      color:#eafff2;
    }
    .status.err{
      display:block;
      border-color: rgba(179,31,36,0.45);
      background: rgba(179,31,36,0.12);
      color:#ffe8e8;
    }

    /* anti-spam honeypot */
    .hp{position:absolute;left:-9999px;opacity:0;height:0;width:0;pointer-events:none}

    .mini{
      font-size:12px;
      color:var(--muted2);
      margin-top:10px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Rezervácie mobilného autoservisu</h1>
        <p class="sub">
          Vyplň formulár a my zabezpečíme výjazd certifikovaného mechanika priamo k tebe.
          Výjazdy sú z <strong>Piešťan</strong> a pokrývame <strong>západné Slovensko</strong>.
        </p>
      </div>
    </div>

    <div class="panel">
      <form id="serviceForm" action="https://formspree.io/f/xgovgvaj" method="POST" novalidate>

        <!-- Formspree helpers -->
        <input type="hidden" name="_subject" value="RACEM – Rezervácia mobilného autoservisu">
        <input type="hidden" name="_replyto" id="replyTo">

        <!-- honeypot -->
        <label class="hp">Nechaj prázdne: <input name="website" tabindex="-1" autocomplete="off"></label>

        <div class="grid">
          <div>
            <label for="name">Meno a priezvisko</label>
            <input id="name" name="meno" required placeholder="Ján Novák">
          </div>

          <div>
            <label for="phone">Telefón</label>
            <input id="phone" name="telefon" required placeholder="+421 9xx xxx xxx">
          </div>

          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" required placeholder="email@email.sk">
          </div>

          <div>
            <label for="service">Služba</label>
            <select id="service" name="sluzba" required>
              <option value="">Vyber službu</option>
              <option>Mobilný servis / oprava</option>
              <option>Diagnostika vozidla</option>
              <option>Obhliadka pred STK / EK</option>
              <option>Obhliadka vozidla pred kúpou</option>
              <option>Asistencia na ceste</option>
            </select>
          </div>

          <div>
            <label for="date">Dátum</label>
            <input id="date" name="datum" type="date" required>
          </div>

          <div>
            <label for="time">Preferovaný čas</label>
            <input id="time" name="cas" type="time" required>
          </div>

          <div class="full">
            <label for="address">Adresa / miesto výjazdu</label>
            <input id="address" name="adresa" required placeholder="Ulica, mesto, PSČ">
          </div>

          <div>
            <label for="car">Značka a model auta</label>
            <input id="car" name="auto" required placeholder="BMW E46 323i">
          </div>

          <div>
            <label for="engine">Rok výroby / motor</label>
            <input id="engine" name="motor" placeholder="2000 · 2.5i">
          </div>

          <div class="full">
            <label for="note">Popis problému / poznámka</label>
            <textarea id="note" name="poznamka" placeholder="Čo presne sa deje s vozidlom?"></textarea>
          </div>
        </div>

        <button class="btn" id="submitBtn" type="submit">Odoslať rezerváciu</button>
        <div class="mini">Odoslaním súhlasíš so spracovaním údajov za účelom vybavenia rezervácie.</div>

        <div class="status" id="statusBox"></div>

        <div class="warning">
          ⚠️ <strong>Upozornenie:</strong><br>
          Pri ohrození života alebo nehode okamžite volajte <strong>112</strong>.<br>
          Táto služba nie je záchranná linka.
        </div>

        <div class="note">
          REM Performance vystupuje ako <strong>sprostredkovateľ služby</strong>.
          Samotné servisné úkony vykonáva <strong>certifikovaný mechanik – subdodávateľ</strong>.
          Presná cena bude potvrdená po obhliadke alebo dohode.
        </div>

      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById('serviceForm');
    const statusBox = document.getElementById('statusBox');
    const submitBtn = document.getElementById('submitBtn');
    const emailInput = document.getElementById('email');
    const replyTo = document.getElementById('replyTo');

    function showStatus(type, html){
      statusBox.className = 'status ' + type;
      statusBox.innerHTML = html;
    }

    function isValidEmail(v){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // set reply-to
      replyTo.value = emailInput.value.trim();

      // basic validation
      const required = form.querySelectorAll('[required]');
      let ok = true;
      required.forEach(el=>{
        if(!el.value.trim()) ok = false;
      });

      if(!ok){
        showStatus('err', '❌ Prosím vyplň všetky povinné polia.');
        return;
      }
      if(!isValidEmail(emailInput.value.trim())){
        showStatus('err', '❌ Zadaj platný email.');
        return;
      }

      // disable button
      submitBtn.disabled = true;
      submitBtn.textContent = 'Odosielam…';

      try{
        const data = new FormData(form);

        const res = await fetch(form.action, {
          method: "POST",
          body: data,
          headers: { "Accept": "application/json" }
        });

        if(res.ok){
          form.reset();
          showStatus('ok',
            '✅ <strong>Rezervácia odoslaná.</strong><br>' +
            'Ozveme sa ti čo najskôr s potvrdením a doplnením ceny / času.'
          );
        } else {
          const out = await res.json().catch(()=>null);
          showStatus('err',
            '❌ <strong>Nepodarilo sa odoslať.</strong><br>' +
            (out && out.errors ? out.errors.map(e=>e.message).join('<br>') : 'Skús to prosím ešte raz o chvíľu.')
          );
        }
      } catch(err){
        showStatus('err', '❌ <strong>Chyba pripojenia.</strong><br>Skús skontrolovať internet a poslať znova.');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Odoslať rezerváciu';
      }
    });
  </script>
</body>
</html>
