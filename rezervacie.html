<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>RACEM – Rezervácie mobilného autoservisu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root{
      --red:#b31f24;
      --bg:#0b0b0b;
      --panel:#141414;
      --panel2:#101010;
      --text:#ffffff;
      --muted:#cfcfcf;
      --muted2:#9b9b9b;
      --line: rgba(255,255,255,0.08);
      --shadow: 0 20px 60px rgba(0,0,0,0.6);
      --radius:18px;
      --ok:#22c55e;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at top, #151515 0, #050505 60%, #000 100%);
      color: var(--text);
    }

    .wrap{max-width:1040px;margin:64px auto;padding:24px}
    @media(max-width:780px){ .wrap{margin:36px auto} }

    h1{font-size:34px;margin:0 0 8px}
    p.sub{color:var(--muted);max-width:900px;line-height:1.6;margin:0}

    .panel{
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      border-radius: var(--radius);
      padding: 28px;
      box-shadow: var(--shadow);
      margin-top: 32px;
      border:1px solid var(--line);
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:18px;
    }
    @media(max-width:780px){
      .grid{grid-template-columns:1fr}
    }

    label{
      font-size:13px;
      color:var(--muted2);
      margin-bottom:6px;
      display:block;
    }

    input, select, textarea{
      width:100%;
      padding:14px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#0e0e0e;
      color:white;
      font-size:15px;
      outline:none;
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(179,31,36,0.55);
      box-shadow: 0 0 0 4px rgba(179,31,36,0.10);
    }
    textarea{resize:vertical;min-height:140px}

    .full{grid-column:1 / -1}

    /* section headings (no categories for services, just for page readability) */
    .secTitle{
      margin: 18px 0 10px;
      font-size:14px;
      letter-spacing:.25px;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .secTitle span{
      color:var(--muted2);
      font-size:12px;
      font-weight:normal;
    }

    /* service search */
    .svcTools{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin: 10px 0 12px;
    }
    .svcTools input{
      flex: 1 1 280px;
    }
    .pillBtn{
      flex: 0 0 auto;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#0e0e0e;
      color:var(--muted);
      cursor:pointer;
      transition: filter .12s ease, border-color .12s ease;
      font-size:14px;
    }
    .pillBtn:hover{filter:brightness(1.07);border-color:rgba(179,31,36,0.35)}

    /* ===== SERVICES: one big list ===== */
    .svcGrid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media(max-width:780px){ .svcGrid{grid-template-columns:1fr} }

    .svcItem{
      position:relative;
      display:flex;
      align-items:flex-start;
      gap:12px;
      padding:14px 14px 14px 52px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.08);
      background:rgba(255,255,255,0.02);
      cursor:pointer;
      user-select:none;
      transition: border-color .15s ease, background .15s ease, transform .12s ease, box-shadow .15s ease;
      min-height:74px;
    }
    .svcItem:hover{
      border-color:rgba(179,31,36,0.30);
      background:rgba(179,31,36,0.05);
      transform: translateY(-1px);
    }

    /* hide native checkbox */
    .svcItem input{
      position:absolute;
      opacity:0;
      pointer-events:none;
    }

    .svcMark{
      position:absolute;
      left:14px;
      top:16px;
      width:26px;
      height:26px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.03);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
      transition: border-color .15s ease, background .15s ease, box-shadow .15s ease;
    }
    .svcMark::after{
      content:"";
      position:absolute;
      left:7px;
      top:6px;
      width:10px;
      height:6px;
      border-left:3px solid rgba(255,255,255,0);
      border-bottom:3px solid rgba(255,255,255,0);
      transform: rotate(-45deg);
      transition: border-color .15s ease;
    }

    .svcText{line-height:1.35}
    .svcText b{font-size:14px;font-weight:800}
    .svcText small{display:block;color:var(--muted2);font-size:12px;margin-top:2px}

    .svcItem:has(input:checked){
      border-color: rgba(179,31,36,0.55);
      background: rgba(179,31,36,0.08);
      box-shadow: 0 12px 30px rgba(179,31,36,0.12);
    }
    .svcItem input:checked ~ .svcMark{
      border-color: rgba(179,31,36,0.65);
      background: rgba(179,31,36,0.22);
      box-shadow: 0 0 0 4px rgba(179,31,36,0.10), inset 0 0 0 1px rgba(0,0,0,0.25);
    }
    .svcItem input:checked ~ .svcMark::after{
      border-left-color: rgba(255,255,255,0.92);
      border-bottom-color: rgba(255,255,255,0.92);
    }

    /* status */
    .status{
      margin-top:16px;
      padding:14px;
      border-radius:12px;
      display:none;
      line-height:1.55;
      border:1px solid var(--line);
      background:#0e0e0e;
      color:var(--muted);
    }
    .status.ok{
      display:block;
      border-color: rgba(34,197,94,0.35);
      background: rgba(34,197,94,0.08);
      color:#eafff2;
    }
    .status.err{
      display:block;
      border-color: rgba(179,31,36,0.45);
      background: rgba(179,31,36,0.12);
      color:#ffe8e8;
    }

    .btn{
      margin-top:24px;
      width:100%;
      padding:16px;
      border-radius:14px;
      border:none;
      background: linear-gradient(135deg, var(--red), #7a1418);
      color:white;
      font-size:16px;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 10px 30px rgba(179,31,36,0.35);
      transition:filter .12s ease, transform .12s ease, opacity .12s ease;
    }
    .btn:hover{filter:brightness(1.08)}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.55;cursor:not-allowed;transform:none}

    .warning{
      margin-top:18px;
      padding:14px;
      border-radius:12px;
      background:rgba(179,31,36,0.15);
      border:1px solid rgba(179,31,36,0.4);
      font-size:14px;
      line-height:1.55;
    }

    .note{
      margin-top:18px;
      font-size:14px;
      color:var(--muted2);
      line-height:1.6;
    }

    .mini{
      color:var(--muted2);
      font-size:12px;
      line-height:1.5;
      margin-top:10px;
    }

    .hp{position:absolute;left:-9999px;opacity:0;height:0;width:0;pointer-events:none}
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Rezervácie mobilného autoservisu</h1>
    <p class="sub">
      Vyplň údaje o vozidle, vyber úkony a popíš problém. Výjazdy sú z Piešťan. Servis vykonáva certifikovaný mechanik (subdodávateľ),
      REM Performance službu sprostredkuje.
    </p>

    <div class="panel">
      <form id="serviceForm" action="https://formspree.io/f/xgovgvaj" method="POST" novalidate>

        <input type="hidden" name="_subject" value="RACEM – Rezervácia mobilného autoservisu">
        <input type="hidden" name="_replyto" id="replyTo">
        <label class="hp">Nechaj prázdne <input name="website" tabindex="-1" autocomplete="off"></label>

        <!-- ZÁKAZNÍK + VOZIDLO -->
        <div class="secTitle">
          <div>Údaje zákazníka & vozidla</div>
          <span>čím presnejšie, tým rýchlejšie vybavíme</span>
        </div>

        <div class="grid">
          <div>
            <label for="name">Meno a priezvisko</label>
            <input id="name" name="meno" required>
          </div>

          <div>
            <label for="phone">Telefón</label>
            <input id="phone" name="telefon" required placeholder="+421 9xx xxx xxx">
          </div>

          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" required>
          </div>

          <div>
            <label for="plate">ŠPZ vozidla</label>
            <input id="plate" name="spz" required placeholder="PN-XXXXXX">
          </div>

          <div>
            <label for="brand">Značka</label>
            <input id="brand" name="znacka" required placeholder="BMW">
          </div>

          <div>
            <label for="model">Model</label>
            <input id="model" name="model" required placeholder="E46 / F10 / Octavia…">
          </div>

          <div>
            <label for="year">Rok výroby</label>
            <input id="year" name="rok_vyroby" required placeholder="napr. 2012">
          </div>

          <div>
            <label for="engine">Motorizácia (voliteľné)</label>
            <input id="engine" name="motorizacia" placeholder="napr. 2.0 TDI / 330i / 1.9T…">
          </div>

          <!-- EXTRA: čo najviac info -->
          <div class="full">
            <label for="address">Kde je vozidlo (adresa / miesto)</label>
            <input id="address" name="miesto" required placeholder="Ulica, mesto, PSČ / parkovisko / GPS popis…">
          </div>

          <div>
            <label for="date">Preferovaný dátum</label>
            <input id="date" name="datum" type="date" required>
          </div>

          <div>
            <label for="time">Preferovaný čas</label>
            <input id="time" name="cas" type="time" required>
          </div>

          <div>
            <label for="urgency">Urgencia</label>
            <select id="urgency" name="urgencia" required>
              <option value="">Vyber</option>
              <option>ASAP (čo najskôr)</option>
              <option>Dnes</option>
              <option>Do 24h</option>
              <option>Tento týždeň</option>
              <option>Nie je súrne</option>
            </select>
          </div>

          <div>
            <label for="drive">Je auto pojazdné?</label>
            <select id="drive" name="pojazdne" required>
              <option value="">Vyber</option>
              <option>Áno</option>
              <option>Čiastočne (opatrne)</option>
              <option>Nie</option>
              <option>Neviem</option>
            </select>
          </div>

          <div class="full">
            <label for="symptoms">Príznaky / popis problému (čo sa deje)</label>
            <textarea id="symptoms" name="popis_problemu" required placeholder="Napr. klepe predok, svieti kontrolka, tečie kvapalina, auto vibruje pri brzdení..."></textarea>
          </div>

          <div class="full">
            <label for="codes">Chybové kódy / kontrolky (ak vieš)</label>
            <input id="codes" name="kody_kontrolky" placeholder="Napr. P0420 / DPF / Check engine / ABS...">
          </div>
        </div>

        <!-- SLUŽBY -->
        <div class="secTitle" style="margin-top:22px;">
          <div>Vyber úkony</div>
          <span>vyber aspoň 1</span>
        </div>

        <div class="svcTools">
          <input id="svcSearch" type="text" placeholder="Hľadať v úkonoch… (napr. brzdy, olej, diagnostika)">
          <button type="button" class="pillBtn" id="btnClear">Zrušiť výber</button>
          <button type="button" class="pillBtn" id="btnDiag">Zaškrtnúť Diagnostiku</button>
        </div>

        <div class="svcGrid" id="svcGrid">

          <!-- Údržba / kvapaliny -->
          <label class="svcItem" data-svc="Výmena oleja">
            <input type="checkbox" name="sluzby[]" value="Výmena oleja">
            <span class="svcMark"></span>
            <div class="svcText"><b>Výmena oleja</b><small>motor / podľa dohody</small></div>
          </label>

          <label class="svcItem" data-svc="Výmena filtrov">
            <input type="checkbox" name="sluzby[]" value="Výmena filtrov">
            <span class="svcMark"></span>
            <div class="svcText"><b>Výmena filtrov</b><small>vzduchový, kabínový, palivový…</small></div>
          </label>

          <label class="svcItem" data-svc="Výmena prevádzkových kvapalín okrem olejov">
            <input type="checkbox" name="sluzby[]" value="Výmena prevádzkových kvapalín (okrem olejov)">
            <span class="svcMark"></span>
            <div class="svcText"><b>Prevádzkové kvapaliny</b><small>brzdová, chladiaca, servo, ostrekovače…</small></div>
          </label>

          <label class="svcItem" data-svc="Chladenie motora">
            <input type="checkbox" name="sluzby[]" value="Chladenie motora">
            <span class="svcMark"></span>
            <div class="svcText"><b>Chladenie motora</b><small>úniky, hadice, termostat, chladič…</small></div>
          </label>

          <!-- Diagnostika / kontrola -->
          <label class="svcItem" data-svc="Diagnostika vozidla">
            <input type="checkbox" name="sluzby[]" value="Diagnostika vozidla">
            <span class="svcMark"></span>
            <div class="svcText"><b>Diagnostika vozidla</b><small>chyby, live data (podľa možností)</small></div>
          </label>

          <label class="svcItem" data-svc="Kontrola vozidla pred STK EK">
            <input type="checkbox" name="sluzby[]" value="Kontrola vozidla pred STK / EK">
            <span class="svcMark"></span>
            <div class="svcText"><b>Kontrola pred STK / EK</b><small>základná kontrola stavu</small></div>
          </label>

          <label class="svcItem" data-svc="Kontrola poškodeného vozidla">
            <input type="checkbox" name="sluzby[]" value="Kontrola poškodeného vozidla">
            <span class="svcMark"></span>
            <div class="svcText"><b>Kontrola poškodeného vozidla</b><small>po nehode / po škode</small></div>
          </label>

          <label class="svcItem" data-svc="Kontrola pred kúpou">
            <input type="checkbox" name="sluzby[]" value="Kontrola vozidla pred kúpou">
            <span class="svcMark"></span>
            <div class="svcText"><b>Kontrola vozidla pred kúpou</b><small>vizuál + základné overenie</small></div>
          </label>

          <!-- Podvozok (aj defekt) -->
          <label class="svcItem" data-svc="Oprava defektu">
            <input type="checkbox" name="sluzby[]" value="Oprava defektu">
            <span class="svcMark"></span>
            <div class="svcText"><b>Oprava defektu</b><small>dojazd / základná oprava podľa možností</small></div>
          </label>

          <label class="svcItem" data-svc="Výmena bŕzd">
            <input type="checkbox" name="sluzby[]" value="Výmena bŕzd">
            <span class="svcMark"></span>
            <div class="svcText"><b>Výmena bŕzd</b><small>platničky / kotúče / strmene…</small></div>
          </label>

          <label class="svcItem" data-svc="Opravy na podvozku">
            <input type="checkbox" name="sluzby[]" value="Opravy na podvozku">
            <span class="svcMark"></span>
            <div class="svcText"><b>Podvozok</b><small>čapy, ramená, silentbloky, ložiská…</small></div>
          </label>

          <label class="svcItem" data-svc="Riadenie a stabilita vozidla">
            <input type="checkbox" name="sluzby[]" value="Oprava riadenia a stability vozidla">
            <span class="svcMark"></span>
            <div class="svcText"><b>Riadenie & stabilita</b><small>vôle, klepanie, ťahanie, geometria (ak sa dá)…</small></div>
          </label>

          <label class="svcItem" data-svc="Tlmiče pružiny">
            <input type="checkbox" name="sluzby[]" value="Tlmiče / pružiny (podvozok)">
            <span class="svcMark"></span>
            <div class="svcText"><b>Tlmiče / pružiny</b><small>kontrola / výmena podľa dohody</small></div>
          </label>

          <label class="svcItem" data-svc="Výmena náboj ložisko">
            <input type="checkbox" name="sluzby[]" value="Ložiská / náboje (podvozok)">
            <span class="svcMark"></span>
            <div class="svcText"><b>Ložiská / náboje</b><small>hučanie, vôle…</small></div>
          </label>

          <!-- Elektronika -->
          <label class="svcItem" data-svc="Elektronika">
            <input type="checkbox" name="sluzby[]" value="Elektronika">
            <span class="svcMark"></span>
            <div class="svcText"><b>Elektronika</b><small>základné opravy / hľadanie problému</small></div>
          </label>

          <label class="svcItem" data-svc="Batéria štartovanie alternátor">
            <input type="checkbox" name="sluzby[]" value="Batéria / štartovanie / dobíjanie">
            <span class="svcMark"></span>
            <div class="svcText"><b>Batéria / štart / dobíjanie</b><small>alternátor, štartér, káble…</small></div>
          </label>

          <label class="svcItem" data-svc="Osvetlenie žiarovky">
            <input type="checkbox" name="sluzby[]" value="Osvetlenie (žiarovky / svetlá)">
            <span class="svcMark"></span>
            <div class="svcText"><b>Osvetlenie</b><small>žiarovky, svetlá, konektory…</small></div>
          </label>

          <label class="svcItem" data-svc="Senzory ABS">
            <input type="checkbox" name="sluzby[]" value="ABS / senzory / kontrolky">
            <span class="svcMark"></span>
            <div class="svcText"><b>ABS / senzory / kontrolky</b><small>základná diagnostika a oprava</small></div>
          </label>

          <!-- Karoséria / interiér / doplnky -->
          <label class="svcItem" data-svc="Výmena karosárskych dielov">
            <input type="checkbox" name="sluzby[]" value="Výmena karosárskych dielov">
            <span class="svcMark"></span>
            <div class="svcText"><b>Karosárske diely</b><small>výmena / montáž dielov</small></div>
          </label>

          <label class="svcItem" data-svc="Montáž interiérových dielov">
            <input type="checkbox" name="sluzby[]" value="Výmena a montáž interiérových dielov">
            <span class="svcMark"></span>
            <div class="svcText"><b>Interiér</b><small>výmena / montáž dielov</small></div>
          </label>

          <label class="svcItem" data-svc="Montáž doplnkov">
            <input type="checkbox" name="sluzby[]" value="Montáž doplnkov">
            <span class="svcMark"></span>
            <div class="svcText"><b>Montáž doplnkov</b><small>kamery, senzory, audio, držiaky…</small></div>
          </label>

          <label class="svcItem" data-svc="Výmena stieračov ostrekovače">
            <input type="checkbox" name="sluzby[]" value="Stierače / ostrekovače">
            <span class="svcMark"></span>
            <div class="svcText"><b>Stierače / ostrekovače</b><small>ramená, trysky, čerpadlo…</small></div>
          </label>

          <!-- “Iné” checkbox -->
          <label class="svcItem" data-svc="Iné">
            <input type="checkbox" name="sluzby[]" value="Iné (popísané v poznámke)">
            <span class="svcMark"></span>
            <div class="svcText"><b>Iné</b><small>ak tu niečo chýba, popíš dole</small></div>
          </label>

        </div>

        <div class="mini">
          Tip: keď nevieš presne, zaškrtni <b>Diagnostika vozidla</b> + popíš problém.
        </div>

        <div class="grid" style="margin-top:16px;">
          <div class="full">
            <label for="parts">Diely zabezpečuje</label>
            <select id="parts" name="diely_zabezpeci" required>
              <option value="">Vyber</option>
              <option>Zákazník (už mám diely)</option>
              <option>REM / RACEM zabezpečí diely</option>
              <option>Neviem – poradíte</option>
            </select>
          </div>

          <div class="full">
            <label for="other">Ďalšie poznámky (prístup k autu, parkovanie, “kde je kľúč”, atď.)</label>
            <textarea id="other" name="poznamky_extra" placeholder="Napr. auto stojí v garáži, treba zvoniť, parkovanie je za rampou..."></textarea>
          </div>
        </div>

        <button class="btn" id="submitBtn" type="submit">Odoslať rezerváciu</button>
        <div class="status" id="statusBox"></div>

        <div class="warning">
          ⚠️ Pri ohrození života alebo nehode volaj <strong>112</strong>. Toto nie je záchranná linka.
        </div>

        <div class="note">
          REM Performance vystupuje ako sprostredkovateľ služby. Samotné servisné úkony vykonáva certifikovaný mechanik – subdodávateľ.
          Presná cena sa potvrdí po dohode / diagnostike.
        </div>
      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById('serviceForm');
    const statusBox = document.getElementById('statusBox');
    const submitBtn = document.getElementById('submitBtn');
    const emailInput = document.getElementById('email');
    const replyTo = document.getElementById('replyTo');

    const svcSearch = document.getElementById('svcSearch');
    const svcItems = Array.from(document.querySelectorAll('.svcItem'));
    const btnClear = document.getElementById('btnClear');
    const btnDiag = document.getElementById('btnDiag');

    function showStatus(type, html){
      statusBox.className = 'status ' + type;
      statusBox.innerHTML = html;
    }
    function isValidEmail(v){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    // search filter
    svcSearch.addEventListener('input', () => {
      const q = svcSearch.value.trim().toLowerCase();
      svcItems.forEach(item => {
        const text = (item.getAttribute('data-svc') + " " + item.innerText).toLowerCase();
        item.style.display = text.includes(q) ? '' : 'none';
      });
    });

    // clear selection
    btnClear.addEventListener('click', () => {
      document.querySelectorAll('input[type="checkbox"][name="sluzby[]"]').forEach(cb => cb.checked = false);
      showStatus('ok', '✅ Výber úkonov zrušený.');
      setTimeout(()=>{ statusBox.style.display='none'; statusBox.className='status'; }, 900);
    });

    // quick select diagnostics
    btnDiag.addEventListener('click', () => {
      const diag = document.querySelector('input[type="checkbox"][name="sluzby[]"][value="Diagnostika vozidla"]');
      if(diag){ diag.checked = true; }
      showStatus('ok', '✅ Diagnostika zaškrtnutá.');
      setTimeout(()=>{ statusBox.style.display='none'; statusBox.className='status'; }, 900);
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      replyTo.value = emailInput.value.trim();

      // required inputs
      const required = form.querySelectorAll('[required]');
      let ok = true;
      required.forEach(el => { if(!String(el.value).trim()) ok = false; });

      // at least one service
      const checked = form.querySelectorAll('input[type="checkbox"][name="sluzby[]"]:checked');
      if(checked.length === 0){
        showStatus('err', '❌ Vyber aspoň jeden úkon (alebo daj Diagnostiku).');
        return;
      }

      if(!ok){
        showStatus('err', '❌ Prosím vyplň všetky povinné polia.');
        return;
      }
      if(!isValidEmail(emailInput.value.trim())){
        showStatus('err', '❌ Zadaj platný email.');
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = 'Odosielam…';

      try{
        const data = new FormData(form);
        const res = await fetch(form.action, {
          method:"POST",
          body:data,
          headers:{ "Accept":"application/json" }
        });

        if(res.ok){
          form.reset();
          // reset search filter
          svcItems.forEach(i => i.style.display = '');
          showStatus('ok', '✅ <strong>Odoslané.</strong><br>Ozveme sa ti čo najskôr s potvrdením a dohodou.');
        } else {
          const out = await res.json().catch(()=>null);
          showStatus('err',
            '❌ <strong>Nepodarilo sa odoslať.</strong><br>' +
            (out && out.errors ? out.errors.map(e=>e.message).join('<br>') : 'Skús to prosím ešte raz.')
          );
        }
      } catch {
        showStatus('err', '❌ <strong>Chyba pripojenia.</strong><br>Skús skontrolovať internet a poslať znova.');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Odoslať rezerváciu';
      }
    });
  </script>
</body>
</html>
